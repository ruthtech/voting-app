(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{15:function(e,a,t){},32:function(e,a,t){e.exports=t.p+"static/media/canada-flag.dea429e4.svg"},41:function(e,a,t){e.exports=t(74)},46:function(e,a,t){},74:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(31),l=t.n(r),o=(t(46),t(5)),i=t(9),s=t.n(i),u=t(7),m=t(20),d=t(8),v=t(14),f=t.n(v),E=c.a.createContext(),p=t(32),b=t.n(p);t(15);var w=function(){var e=Object(n.useState)(),a=Object(o.a)(e,2),t=a[0],r=a[1],l=Object(n.useState)(),i=Object(o.a)(l,2),v=i[0],p=i[1];return c.a.createElement(E.Consumer,null,(function(e){var a=e.handleLogin;return c.a.createElement("div",{className:"container-fluid bg-almostWhite full-screen"},c.a.createElement("div",{className:"row flag-block "},c.a.createElement(m.a,{className:"bg-white",src:b.a,alt:"Canada Flag"})),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col heading"},c.a.createElement("h1",null,"Canada Votes Online"))),c.a.createElement("div",{className:"row bottom-page"},c.a.createElement("div",{className:"col"},c.a.createElement(d.a,null,c.a.createElement(d.a.Group,{controlId:"formBasicUUID"},c.a.createElement(d.a.Label,{className:"entry-field-label"},"Username"),c.a.createElement(d.a.Control,{type:"text",value:t,onChange:function(e){return r(e.target.value)}})),c.a.createElement(d.a.Group,{controlId:"formBasicPassword"},c.a.createElement(d.a.Label,{className:"entry-field-label"},"Password"),c.a.createElement(d.a.Control,{type:"password",value:v,onChange:function(e){return p(e.target.value)}})),c.a.createElement("div",{className:"right-align-div"},c.a.createElement(u.a,{variant:"secondary",type:"submit",onClick:function(e){!function(e,a,t,n){var c,r;s.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,n.preventDefault(),e=escape(e),c="/api/login/".concat(e,"/").concat(a),l.next=6,s.a.awrap(f.a.get(c));case 6:if((r=l.sent).data.isVerified){l.next=10;break}return t(null),l.abrupt("return");case 10:t(r.data.isVerified),l.next=17;break;case 13:l.prev=13,l.t0=l.catch(0),console.log(l.t0),t(null);case 17:case"end":return l.stop()}}),null,null,[[0,13]])}(t,v,a,e)}},"Sign in"))))))}))},N=t(34),g=t(35),h=t(39),C=t(36),y=t(40),O=(t(69),t(21)),j=t.n(O),k=t(11),x=t(37);var S=function(e){var a=Object(n.useState)(e.user),t=Object(o.a)(a,2),r=t[0],l=t[1],i=Object(n.useState)(0),m=Object(o.a)(i,2),d=m[0],v=m[1],p=function(a){return c.a.createElement("div",{className:"container-fluid bg-almostWhite full-screen"},c.a.createElement("div",{className:"row pt-3"},c.a.createElement("div",{className:"col"},c.a.createElement("h4",null,"Is this correct?"))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col bg-white centre-align-div"},c.a.createElement("p",null,r.streetNo," ",unescape(r.address),", ",unescape(r.city),", ",unescape(r.province),", ",unescape(r.postalCode)))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement(u.a,{variant:"secondary w-100",type:"button",onClick:function(){v(1)}},"Edit")),c.a.createElement("div",{className:"col"},c.a.createElement(u.a,{variant:"secondary w-100",type:"submit",onClick:function(){!function(a,t){var n;s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.awrap(f.a.put("/api/updateAddress/".concat(r._doc.login.username,"/").concat(r.streetNo,"/").concat(r.address,"/").concat(r.city,"/").concat(r.province,"/").concat(r.postalCode)));case 3:n=t.sent,l(n.data),e.user=n.data,a(n.data),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),null,null,[[0,9]])}(a),v(2)}},"Confirm"))))},b=function(e){switch(d){case 1:return function(){var e={streetNo:unescape(r.streetNo),address:unescape(r.address),city:unescape(r.city),province:unescape(r.province),postalCode:unescape(r.postalCode)};return console.log("location is ",e),c.a.createElement(_,{location:e})}();case 2:return c.a.createElement(Y,null);case 0:default:return p(e)}};return c.a.createElement(E.Consumer,null,(function(e){var a=e.handleLogin;return b(a)}))};var _=function(e){console.log("EditDistrict, props are ",e);var a=Object(n.useState)(),t=Object(o.a)(a,2),r=t[0],l=t[1],i=Object(n.useState)(e.location.streetNo),m=Object(o.a)(i,2),v=m[0],f=m[1],p=Object(n.useState)(e.location.address),b=Object(o.a)(p,2),w=b[0],N=b[1],g=Object(n.useState)(e.location.city),h=Object(o.a)(g,2),C=h[0],y=h[1],O=Object(n.useState)(e.location.province),j=Object(o.a)(O,2),_=j[0],I=j[1],V=Object(n.useState)(e.location.postalCode),L=Object(o.a)(V,2),B=L[0],P=L[1],T=Object(n.useState)(0),A=Object(o.a)(T,2),D=A[0],G=A[1],W=function(){return c.a.createElement("div",{className:"container-fluid bg-almostWhite full-screen"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("h1",null,"Enter your new address"))),c.a.createElement("div",{className:"row pb-3"},c.a.createElement("div",{className:"col "},c.a.createElement(d.a,null,c.a.createElement(d.a.Group,{controlId:"formBasicAddress"},c.a.createElement(d.a.Label,{id:"streetNoLabel",className:"entry-field-label"},"Street Number"),c.a.createElement(d.a.Control,{id:"streetNo",type:"number",value:v,onChange:function(e){return f(e.target.value)}}),c.a.createElement(d.a.Label,{className:"entry-field-label"},"Address"),c.a.createElement(d.a.Control,{type:"text",value:w,onChange:function(e){return N(e.target.value)}})),c.a.createElement(d.a.Group,{controlId:"formBasicCity"},c.a.createElement(d.a.Label,{className:"entry-field-label"},"City"),c.a.createElement(d.a.Control,{type:"text",value:C,onChange:function(e){return y(e.target.value)}})),c.a.createElement(d.a.Group,{controlId:"formBasicPostalcode"},c.a.createElement(d.a.Label,{className:"entry-field-label"},"Postal Code"),c.a.createElement(d.a.Control,{type:"text",value:B,onChange:function(e){return P(e.target.value)}})),c.a.createElement(d.a.Group,{controlId:"provinces",value:_,className:"right-align-div"},c.a.createElement(x.a,{id:"provinceDropdown",title:"Province/Territory",variant:"secondary"},c.a.createElement(k.a.Item,{id:"Alberta",onClick:function(e){return I(e.target.id)}},"Alberta"),c.a.createElement(k.a.Item,{id:"British%20Columbia",onClick:function(e){return I(e.target.id)}},"British Columbia"),c.a.createElement(k.a.Item,{id:"Manitoba",onClick:function(e){return I(e.target.id)}},"Manitoba"),c.a.createElement(k.a.Item,{id:"New%20Brunswick",onClick:function(e){return I(e.target.id)}},"New Brunswick"),c.a.createElement(k.a.Item,{id:"Newfoundland%20and%20Labrador",onClick:function(e){return I(e.target.id)}},"Newfoundland and Labrador"),c.a.createElement(k.a.Item,{id:"Northwest%20Territories",onClick:function(e){return I(e.target.id)}},"Northwest Territories"),c.a.createElement(k.a.Item,{id:"Nova%20 Scotia",onClick:function(e){return I(e.target.id)}},"Nova Scotia"),c.a.createElement(k.a.Item,{id:"Nunavut",onClick:function(e){return I(e.target.id)}},"Nunavut"),c.a.createElement(k.a.Item,{id:"Ontario",onClick:function(e){return I(e.target.id)}},"Ontario"),c.a.createElement(k.a.Item,{id:"Prince%20Edward%20Island",onClick:function(e){return I(e.target.value)}},"Prince Edward Island"),c.a.createElement(k.a.Item,{id:"Quebec",onClick:function(e){return I(e.target.id)}},"Quebec"),c.a.createElement(k.a.Item,{id:"Saskatchewan",onClick:function(e){return I(e.target.id)}},"Saskatchewan"),c.a.createElement(k.a.Item,{id:"Yukon",onClick:function(e){return I(e.target.id)}},"Yukon"))),c.a.createElement(d.a.Group,{controlId:"formSubmit",className:"centre-align-div"},c.a.createElement(u.a,{variant:"secondary w-50 mr-3",type:"button",onClick:function(){G(2)}},"Back"),c.a.createElement(u.a,{variant:"secondary w-50 ml-3",type:"submit",onClick:function(e){!function(e){var a,t,n,c;s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:try{a=escape(v),t=escape(w),n=escape(C),c=escape(_),r.streetNo=a,r.address=t,r.city=n,r.province=c,r.postalCode=B.replace(/\s/g,""),l(r)}catch(o){console.log(o)}case 1:case"end":return e.stop()}}))}(),G(1)}},"Save"))))))},M=function(){switch(D){case 2:return c.a.createElement(Y,null);case 1:return c.a.createElement(S,{user:r});case 0:default:return W()}};return c.a.createElement(E.Consumer,null,(function(e){var a=e.user;return l(a),M()}))};var I=function(){return c.a.createElement("div",null,c.a.createElement("i",{className:"fa fa-spinner fa-spin"})," Loading...")};var V=function(e){var a=Object(n.useState)(e.candidate),t=Object(o.a)(a,1)[0],r=Object(n.useState)(0),l=Object(o.a)(r,2),i=l[0],s=l[1],m=function(e){switch(e){case"Conservative Party of Canada":return"http://www.conservative.ca";case"Green Party of Canada":return"http://greenparty.ca";case"Liberal Party of Canada":return"http://www.liberal.ca";case"New Democratic Party":return"http://www.ndp.ca";case"Bloc Qu\xe9b\xe9cois":return"http://blocquebecois.org";default:return"https://www.elections.ca/content.aspx?section=pol&dir=par&document=index&lang=e"}};return function(){switch(i){case 2:return c.a.createElement(Y,null);case 1:return c.a.createElement(B,null);case 0:default:return c.a.createElement("div",{className:"container-fluid full-screen bg-almostWhite"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("h1",null,t.first_name," ",t.last_name),c.a.createElement("h5",null,t.party_affiliation),c.a.createElement("h5",null,t.district_name))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col centre-align-div"},c.a.createElement("h4",null,c.a.createElement("a",{href:m(t.party_affiliation)},t.party_affiliation)))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col centre-align-div"},c.a.createElement("h4",null,c.a.createElement("a",{href:"https://www.elections.ca/content.aspx?section=pol&dir=par&document=index&lang=e"},"Elections Canada Registered Political Parties")))),c.a.createElement("div",{className:"row p-3"},c.a.createElement("div",{className:"col"},c.a.createElement(u.a,{variant:"secondary w-100",onClick:function(){s(1)}},"View Candidates")),c.a.createElement("div",{className:"col"},c.a.createElement(u.a,{variant:"secondary w-100",onClick:function(){s(2)}},"Home"))))}}()},L=t(12);var B=function(){var e=Object(n.useState)([]),a=Object(o.a)(e,2),t=a[0],r=a[1],l=Object(n.useState)(null),i=Object(o.a)(l,2),m=i[0],d=i[1],v=Object(n.useState)(null),p=Object(o.a)(v,2),b=p[0],w=p[1],N=Object(n.useState)(0),g=Object(o.a)(N,2),h=g[0],C=g[1];Object(n.useEffect)((function(){!function(){var e,a;s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null!==m){t.next=3;break}return t.abrupt("return");case 3:if(0!==h){t.next=10;break}return e=m._doc.location.postcode.replace(/\s/g,""),t.next=7,s.a.awrap(f.a.get("/api/candidates/".concat(e)));case 7:a=t.sent,r(a.data.candidateList),C(2);case 10:t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0),r([]);case 16:case"end":return t.stop()}}),null,null,[[0,12]])}()}),[m]);var y=function(e){return c.a.createElement("div",{key:e.id,className:"col-12 col-sm-4 mt-3"},c.a.createElement(L.a,{className:e.party},c.a.createElement(L.a.Title,null,e.first_name," ",e.last_name),c.a.createElement(L.a.Text,null,e.party_affiliation),c.a.createElement("button",{className:"btn btn-secondary",onClick:function(a){w(e),C(3)}},"View ",e.first_name," ",e.last_name)))},O=function(){switch(h){case 0:return c.a.createElement(I,null);case 1:return c.a.createElement(Y,null);case 3:return e=b,c.a.createElement(V,{candidate:e,handleSelectCandidate:w});case 4:return t.map((function(e){return y(e)}));case 2:default:return c.a.createElement("div",{className:"container-fluid bg-almostWhite"},c.a.createElement("div",{className:"row "},t.map((function(e){return y(e)}))),c.a.createElement("div",{className:"row mt-3 pb-3"},c.a.createElement("div",{className:"col text-right"},c.a.createElement(u.a,{variant:"secondary",onClick:function(){C(1)}},"Home"))))}var e};return c.a.createElement(E.Consumer,null,(function(e){var a=e.user;return d(a),O()}))},P=t(19);var T=function(e){return e.model.map((function(a,t){return c.a.createElement(P.a,{key:t,className:"pb-3"},c.a.createElement(d.a.Control,{plaintext:!0,readOnly:!0,className:"bg-white text-right pr-3",defaultValue:a.last_name+", "+a.first_name+" / "+a.party_affiliation}),c.a.createElement(P.a.Append,null,c.a.createElement(P.a.Radio,{name:"votingGroup","aria-label":a.last_name+", "+a.first_name+" / "+a.party_affiliation,onChange:function(){return e.handleFormSelect(a)}})))}))};var A=function(e){var a=Object(n.useState)(e.candidate),t=Object(o.a)(a,1)[0],r=Object(n.useState)(0),l=Object(o.a)(r,2),i=l[0],m=l[1];console.log("VoteSubmitted props is ",e),console.log("VoteSubmitted candidate is ",t);var d=function(){switch(i){case 1:return c.a.createElement(Y,null);case 0:default:return c.a.createElement("div",{className:"container-fluid bg-almostWhite full-screen"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("h1",null,"You voted for"))),c.a.createElement("div",{className:"row pb-3"},c.a.createElement("div",{className:"col"},c.a.createElement(L.a,null,c.a.createElement(L.a.Body,null,c.a.createElement(L.a.Title,null,t.first_name," ",t.last_name),c.a.createElement(L.a.Text,null,t.party_affiliation))))),c.a.createElement("div",{className:"row pt-3"},c.a.createElement("div",{className:"col"},c.a.createElement("h2",null,"Thank you! Your vote has been registered."))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col right-align-div"},c.a.createElement(u.a,{variant:"secondary w-50",onClick:function(){m(1)}},"Home"))))}};return c.a.createElement(E.Consumer,null,(function(e){return function(e,a){s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("/api/voter/".concat(e.uuid,"/").concat(a.id)),t.next=4,s.a.awrap(f.a.put("/api/voter/".concat(e.uuid,"/").concat(a.id)));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),null,null,[[0,6]])}(e.user,t),d()}))};var D=function(e){var a=Object(n.useState)(0),t=Object(o.a)(a,2),r=t[0],l=t[1],i=Object(n.useState)(e.candidate),s=Object(o.a)(i,1)[0];console.log("VoteConfirm candidate is ",s);var m=function(){switch(r){case 1:return c.a.createElement(G,null);case 2:return c.a.createElement(A,{candidate:s});case 0:default:return c.a.createElement("div",{className:"container-fluid bg-almostWhite full-screen"},c.a.createElement("div",{className:"row pb-3"},c.a.createElement("div",{className:"col"},c.a.createElement("h1",null,"You are voting for"))),c.a.createElement("div",{className:"row pb-3 text-center"},c.a.createElement("div",{className:"col"},c.a.createElement(L.a,null,c.a.createElement(L.a.Body,null,c.a.createElement(L.a.Title,null,s.first_name," ",s.last_name),c.a.createElement(L.a.Text,null,s.party_affiliation))))),c.a.createElement("div",{className:"row pt-3"},c.a.createElement("div",{className:"col"},c.a.createElement("h1",null,"Is this correct?"))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement(u.a,{variant:"secondary w-100",onClick:function(){l(1)}},"Edit")),c.a.createElement("div",{className:"col"},c.a.createElement(u.a,{variant:"secondary w-100",onClick:function(){l(2)}},"Confirm"))))}};return c.a.createElement(E.Consumer,null,(function(e){e.user;return m()}))};var G=function(){var e=Object(n.useState)([]),a=Object(o.a)(e,2),t=a[0],r=a[1],l=Object(n.useState)(null),i=Object(o.a)(l,2),m=i[0],d=i[1],v=Object(n.useState)(0),p=Object(o.a)(v,2),b=p[0],w=p[1],N=Object(n.useState)(null),g=Object(o.a)(N,2),h=g[0],C=g[1];Object(n.useEffect)((function(){!function(){var e,a;s.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null!==h){t.next=3;break}return t.abrupt("return");case 3:if(0!==b){t.next=13;break}return console.log(h._doc),e=h._doc.location.postcode.replace(/\s/g,""),console.log("Vote loadCandidates with /api/candidates/".concat(e)),t.next=9,s.a.awrap(f.a.get("/api/candidates/".concat(e)));case 9:a=t.sent,console.log("Vote loadCandidates after ",a.data),r(a.data.candidateList),w(2);case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),console.log(t.t0),r([]);case 19:case"end":return t.stop()}}),null,null,[[0,15]])}()}),[h]);var y=function(e){return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:console.log("Vote, candidate selected, candidate is ",e),d(e);case 2:case"end":return a.stop()}}))},O=function(){switch(b){case 0:return c.a.createElement(I,null);case 1:return c.a.createElement(D,{candidate:m});case 2:default:return c.a.createElement("div",{className:"container-fluid bg-almostWhite full-screen"},c.a.createElement("div",{className:"row pt-3"},c.a.createElement("div",{className:"col"},c.a.createElement("h1",null,"Vote in District ",h._doc.location.district))),c.a.createElement("div",{className:"row pt-3 pb-3"},c.a.createElement("div",{className:"col"},c.a.createElement(T,{model:t,handleFormSelect:y}))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col right-align-div"},c.a.createElement(u.a,{variant:"secondary w-50",type:"submit",onClick:function(){w(1)},disabled:null===m},"Vote"))))}};return c.a.createElement(E.Consumer,null,(function(e){var a=e.user;return C(a),O()}))};j.a.accessToken="pk.eyJ1IjoiZXNjaGVyZmFuIiwiYSI6ImNrMXdid2lyNTAwNmkzbW93bTNpMHE4N3YifQ.7Jg5xKMsj7Y29BJG74q7Aw";var W=function(e){function a(){var e,t;Object(N.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(h.a)(this,(e=Object(C.a)(a)).call.apply(e,[this].concat(r)))).state={activeComponentId:0,map:null},t.renderDefault=function(){var e=t.context.user;return c.a.createElement("div",{className:"container-fluid full-screen"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-8 col-sm-9 mt-3 ml-3 bg-white text-center pt-2 mapFormWidget"},"Your district is ",e._doc.location.district),c.a.createElement("div",{className:"col-3 col-sm-2 mt-3"},c.a.createElement(u.a,{variant:"secondary w-100",onClick:function(){t.setState({activeComponentId:2})}},"Edit"))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{ref:function(e){return t.mapContainer=e},className:"col mapContainer"})),c.a.createElement("div",{className:"row pb-3"},c.a.createElement("div",{className:"col"},c.a.createElement(u.a,{variant:"secondary w-100",onClick:function(){t.setState({activeComponentId:3})}},"View Candidates")),c.a.createElement("div",{className:"col"},c.a.createElement(u.a,{variant:"secondary w-100",onClick:function(){t.setState({activeComponentId:4})}},"Vote"))))},t.renderEditDistrict=function(){var e=t.context.user,a={streetNo:e._doc.location.street.number,address:e._doc.location.street.name,city:e._doc.location.city,province:e._doc.location.state,postalCode:e._doc.location.postcode};return c.a.createElement(_,{location:a})},t.renderViewCandidates=function(){return c.a.createElement(B,null)},t.renderVote=function(){return c.a.createElement(G,null)},t.renderActiveComponent=function(){switch(t.state.activeComponentId){case 4:return t.renderVote();case 3:return t.renderViewCandidates();case 2:return t.renderEditDistrict();case 0:default:return t.renderDefault()}},t}return Object(y.a)(a,e),Object(g.a)(a,[{key:"componentDidMount",value:function(){if(0===this.state.activeComponentId){var e=this.context.user,a=e._doc.location.coordinates.latitude,t=e._doc.location.coordinates.longitude,n=new j.a.Map({container:this.mapContainer,style:"mapbox://styles/mapbox/streets-v11",center:[t,a],zoom:12});this.setState({map:n})}}},{key:"componentDidUpdate",value:function(){if(0===this.state.activeComponentId){var e=this.context.user,a=e._doc.location.coordinates.latitude,t=e._doc.location.coordinates.longitude;this.state.map.setCenter([t,a])}}},{key:"render",value:function(){return this.renderActiveComponent()}}]),a}(n.Component);W.contextType=E;var Y=W;var M=function(){var e=Object(n.useState)(null),a=Object(o.a)(e,2),t=a[0],r=a[1],l=null;return l=null!=t?c.a.createElement(Y,null):c.a.createElement(w,null),c.a.createElement(E.Provider,{value:{user:t,handleLogin:function(e){console.log("App Context ",e),r(e)}}},l)};t(72),t(73);l.a.render(c.a.createElement(M,null),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.2b153644.chunk.js.map