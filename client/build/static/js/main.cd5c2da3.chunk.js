(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{16:function(e,t,a){},38:function(e,t,a){e.exports=a.p+"static/media/canada-flag.dea429e4.svg"},44:function(e,t,a){e.exports=a(77)},49:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(37),o=a.n(r),l=(a(49),a(6)),i=a(9),s=a.n(i),u=a(7),d=a(39),m=a(8),v=a(15),f=a.n(v),p=c.a.createContext(),E=a(38),b=a.n(E);a(16);var g=function(e){var t=Object(n.useState)(),a=Object(l.a)(t,2),r=a[0],o=a[1],i=Object(n.useState)(),v=Object(l.a)(i,2),E=v[0],g=v[1];return c.a.createElement(p.Consumer,null,(function(t){var a=t.handleLogin;return c.a.createElement("div",{className:"container-fluid bg-almostWhite full-screen"},c.a.createElement("div",{className:"row flag-block "},c.a.createElement(d.a,{className:"bg-white",src:b.a,alt:"Canada Flag"})),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col heading"},c.a.createElement("h1",null,"Canada Votes Online"))),c.a.createElement("div",{className:"row bottom-page"},c.a.createElement("div",{className:"col"},c.a.createElement(m.a,null,c.a.createElement(m.a.Group,{id:"formBasicUUID"},c.a.createElement(m.a.Label,{className:"entry-field-label"},"Username"),c.a.createElement(m.a.Control,{type:"text",defaultValue:r,onChange:function(e){return o(e.target.value)}})),c.a.createElement(m.a.Group,{id:"formBasicPassword"},c.a.createElement(m.a.Label,{className:"entry-field-label"},"Password"),c.a.createElement(m.a.Control,{type:"password",defaultValue:E,onChange:function(e){return g(e.target.value)}})),c.a.createElement("div",{className:"right-align-div"},c.a.createElement(u.a,{variant:"secondary",type:"submit",onClick:function(t){!function(t,a,n,c){var r,o;s.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,c.preventDefault(),t=encodeURI(t),r="/api/login/".concat(t,"/").concat(a),l.next=6,s.a.awrap(f.a.get(r));case 6:if((o=l.sent).data.isVerified){l.next=10;break}return n(null),l.abrupt("return");case 10:n(o.data.isVerified),l.next=17;break;case 13:l.prev=13,l.t0=l.catch(0),e.log.error(l.t0),n(null);case 17:case"end":return l.stop()}}),null,null,[[0,13]])}(r,E,a,t)}},"Sign in"))))))}))},N=a(20),w=a(21),h=a(23),y=a(22),C=a(24),O=(a(72),a(26)),j=a.n(O),k=a(12),S=a(11),x=a(41);var I=function(e){var t=Object(n.useState)(e.location),a=Object(l.a)(t,2),r=a[0],o=a[1],i=Object(n.useState)(e.username),d=Object(l.a)(i,1)[0],m=Object(n.useState)(0),v=Object(l.a)(m,2),E=v[0],b=v[1],g=function(t){return c.a.createElement("div",{className:"container-fluid bg-almostWhite full-screen"},c.a.createElement("div",{className:"row pt-3"},c.a.createElement("div",{className:"col"},c.a.createElement("h4",null,"Is this correct?"))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("h6",null,"If there were any problems locating the address that you entered, the closest address is displayed below."))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col bg-white centre-align-div"},c.a.createElement("p",null,r.streetNo," ",r.streetName,", ",r.city,", ",r.province,", ",r.postcode))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement(u.a,{variant:"secondary w-100",type:"button",onClick:function(){b(1)}},"Edit")),c.a.createElement("div",{className:"col"},c.a.createElement(u.a,{variant:"secondary w-100",type:"submit",onClick:function(){!function(t){var a;s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,s.a.awrap(f.a.put("/api/updateAddress/".concat(encodeURI(d),"/").concat(encodeURI(r.streetNo),"/").concat(encodeURI(r.streetName),"/").concat(encodeURI(r.city),"/").concat(encodeURI(r.province),"/").concat(encodeURI(r.postcode))));case 3:a=n.sent,o(a.data),t(a.data),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),e.log.error(n.t0);case 11:case"end":return n.stop()}}),null,null,[[0,8]])}(t),b(2)}},"Confirm"))))},N=function(t){switch(E){case 1:return e.debug("location is ",r),c.a.createElement(D,{location:r});case 2:return c.a.createElement(X,null);case 0:default:return g(t)}};return c.a.createElement(p.Consumer,null,(function(e){var t=e.handleLogin;return N(t)}))},_=a(17),A=a.n(_),L=function(e){function t(){var e,a;Object(N.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={location:a.props.location,activeComponentId:0},a.handleFormSubmit=function(e){var t,n;return s.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,e.preventDefault(),(t=a.context.log).debug("EditDistrict about to call /api/address/".concat(encodeURI(a.state.location.streetNo),"/").concat(encodeURI(a.state.location.streetName),"/").concat(encodeURI(a.state.location.city),"/").concat(encodeURI(a.state.location.province),"/").concat(encodeURI(a.state.location.postcode.replace(/\s/g,"")))),c.next=6,s.a.awrap(f.a.get("/api/address/".concat(encodeURI(a.state.location.streetNo),"/").concat(encodeURI(a.state.location.streetName),"/").concat(encodeURI(a.state.location.city),"/").concat(encodeURI(a.state.location.province),"/").concat(encodeURI(a.state.location.postcode.replace(/\s/g,"")))));case 6:n=c.sent,t.debug("EditDistrict, newLocation is ",n.data),a.setState({location:n.data}),c.next=14;break;case 11:c.prev=11,c.t0=c.catch(0),A.a.error(c.t0);case 14:case"end":return c.stop()}}),null,null,[[0,11]])},a.renderBack=function(){return c.a.createElement(X,null)},a.renderConfirm=function(){var e=a.context.user,t=a.context.log;return t.debug("EditDistrict about to confirm, location is ",a.state.location),c.a.createElement(I,{location:a.state.location,username:e._doc.login.username,log:t})},a.renderDefault=function(){return a.context.log.debug("EditDistrict rendering page, location is ",a.state.location),c.a.createElement("div",{className:"container-fluid bg-almostWhite full-screen"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("h1",null,"Enter your new address"))),c.a.createElement("div",{className:"row pb-3"},c.a.createElement("div",{className:"col "},c.a.createElement(m.a,null,c.a.createElement(m.a.Group,{id:"formBasicAddress"},c.a.createElement(m.a.Label,{id:"streetNoLabel",className:"entry-field-label"},"Street Number"),c.a.createElement(m.a.Control,{id:"streetNo",type:"number",value:a.state.location.streetNo,onChange:function(e){return a.setState({location:Object(k.a)({},a.state.location,{streetNo:e.target.value})})}}),c.a.createElement(m.a.Label,{className:"entry-field-label"},"Address"),c.a.createElement(m.a.Control,{type:"text",value:a.state.location.streetName,onChange:function(e){return a.setState({location:Object(k.a)({},a.state.location,{streetName:e.target.value})})}})),c.a.createElement(m.a.Group,{id:"formBasicCity"},c.a.createElement(m.a.Label,{className:"entry-field-label"},"City"),c.a.createElement(m.a.Control,{type:"text",value:a.state.location.city,onChange:function(e){return a.setState({location:Object(k.a)({},a.state.location,{city:e.target.value})})}})),c.a.createElement(m.a.Group,{id:"formBasicPostalcode"},c.a.createElement(m.a.Label,{className:"entry-field-label"},"Postal Code"),c.a.createElement(m.a.Control,{type:"text",value:a.state.location.postcode,onChange:function(e){return a.setState({location:Object(k.a)({},a.state.location,{postcode:e.target.value})})}})),c.a.createElement(m.a.Group,{value:a.state.location.province,className:"right-align-div"},c.a.createElement(x.a,{id:"provinceDropdown",title:"Province/Territory",variant:"secondary"},c.a.createElement(S.a.Item,{id:"Alberta",onClick:function(){a.setState({location:Object(k.a)({},a.state.location,{province:"Alberta"})})}},"Alberta"),c.a.createElement(S.a.Item,{id:"BritishColumbia",onClick:function(){return a.setState({location:Object(k.a)({},a.state.location,{province:"British Columbia"})})}},"British Columbia"),c.a.createElement(S.a.Item,{id:"Manitoba",onClick:function(){return a.setState({location:Object(k.a)({},a.state.location,{province:"Manitoba"})})}},"Manitoba"),c.a.createElement(S.a.Item,{id:"NewBrunswick",onClick:function(){return a.setState({location:Object(k.a)({},a.state.location,{province:"New Brunswick"})})}},"New Brunswick"),c.a.createElement(S.a.Item,{id:"NewfoundlandandLabrador",onClick:function(){return a.setState({location:Object(k.a)({},a.state.location,{province:"Newfoundland and Labrador"})})}},"Newfoundland and Labrador"),c.a.createElement(S.a.Item,{id:"NorthwestTerritories",onClick:function(){return a.setState({location:Object(k.a)({},a.state.location,{province:"Northwest Territories"})})}},"Northwest Territories"),c.a.createElement(S.a.Item,{id:"NovaScotia",onClick:function(){return a.setState({location:Object(k.a)({},a.state.location,{province:"Nova Scotia"})})}},"Nova Scotia"),c.a.createElement(S.a.Item,{id:"Nunavut",onClick:function(){return a.setState({location:Object(k.a)({},a.state.location,{province:"Nunavut"})})}},"Nunavut"),c.a.createElement(S.a.Item,{id:"Ontario",onClick:function(){return a.setState({location:Object(k.a)({},a.state.location,{province:"Ontario"})})}},"Ontario"),c.a.createElement(S.a.Item,{id:"PrinceEdwardIsland",onClick:function(){return a.setState({location:Object(k.a)({},a.state.location,{province:"Prince Edward Island"})})}},"Prince Edward Island"),c.a.createElement(S.a.Item,{id:"Quebec",onClick:function(){return a.setState({location:Object(k.a)({},a.state.location,{province:"Quebec"})})}},"Quebec"),c.a.createElement(S.a.Item,{id:"Saskatchewan",onClick:function(){return a.setState({location:Object(k.a)({},a.state.location,{province:"Saskatchewan"})})}},"Saskatchewan"),c.a.createElement(S.a.Item,{id:"Yukon",onClick:function(){return a.setState({location:Object(k.a)({},a.state.location,{province:"Yukon"})})}},"Yukon"))),c.a.createElement(m.a.Group,{controlId:"formSubmit",className:"centre-align-div"},c.a.createElement(u.a,{variant:"secondary w-50 mr-3",type:"button",onClick:function(){a.setState({activeComponentId:2})}},"Back"),c.a.createElement(u.a,{variant:"secondary w-50 ml-3",type:"submit",onClick:function(e){a.handleFormSubmit(e),a.setState({activeComponentId:1})}},"Save"))))))},a.renderActiveComponent=function(){switch(a.state.activeComponentId){case 2:return a.renderBack();case 1:return a.renderConfirm();case 0:default:return a.renderDefault()}},a}return Object(C.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return this.renderActiveComponent()}}]),t}(n.Component);L.contextType=p;var D=L;var G=function(){return c.a.createElement("div",null,c.a.createElement("i",{className:"fa fa-spinner fa-spin"})," Loading...")};var V=function(e){var t=Object(n.useState)(e.candidate),a=Object(l.a)(t,1)[0],r=Object(n.useState)(0),o=Object(l.a)(r,2),i=o[0],s=o[1],d=function(e){switch(e){case"Conservative Party of Canada":return"http://www.conservative.ca";case"Green Party of Canada":return"http://greenparty.ca";case"Liberal Party of Canada":return"http://www.liberal.ca";case"New Democratic Party":return"http://www.ndp.ca";case"Bloc Qu\xe9b\xe9cois":return"http://blocquebecois.org";default:return"https://www.elections.ca/content.aspx?section=pol&dir=par&document=index&lang=e"}};return function(){switch(i){case 2:return c.a.createElement(X,null);case 1:return c.a.createElement(R,null);case 0:default:return c.a.createElement("div",{className:"container-fluid full-screen bg-almostWhite"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("h1",null,a.first_name," ",a.last_name),c.a.createElement("h5",null,a.party_affiliation),c.a.createElement("h5",null,a.district_name))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col centre-align-div"},c.a.createElement("h4",null,c.a.createElement("a",{href:d(a.party_affiliation)},a.party_affiliation)))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col centre-align-div"},c.a.createElement("h4",null,c.a.createElement("a",{href:"https://www.elections.ca/content.aspx?section=pol&dir=par&document=index&lang=e"},"Elections Canada Registered Political Parties")))),c.a.createElement("div",{className:"row p-3"},c.a.createElement("div",{className:"col"},c.a.createElement(u.a,{variant:"secondary w-100",onClick:function(){s(1)}},"View Candidates")),c.a.createElement("div",{className:"col"},c.a.createElement(u.a,{variant:"secondary w-100",onClick:function(){s(2)}},"Home"))))}}()},U=a(13);var R=function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),r=a[0],o=a[1],i=Object(n.useState)(null),d=Object(l.a)(i,2),m=d[0],v=d[1],E=Object(n.useState)(null),b=Object(l.a)(E,2),g=b[0],N=b[1],w=Object(n.useState)(0),h=Object(l.a)(w,2),y=h[0],C=h[1];Object(n.useEffect)((function(){!function(){var t,a;s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,null!==m){n.next=3;break}return n.abrupt("return");case 3:if(0!==y){n.next=12;break}return t=m._doc.location.postcode.replace(/\s/g,""),e.log.debug("/api/candidates/".concat(t)),n.next=8,s.a.awrap(f.a.get("/api/candidates/".concat(t)));case 8:a=n.sent,e.log.debug("View Candidates found ",a),o(a.data.candidateList),C(2);case 12:n.next=18;break;case 14:n.prev=14,n.t0=n.catch(0),e.log.error(n.t0),o([]);case 18:case"end":return n.stop()}}),null,null,[[0,14]])}()}),[m]);var O=function(e){return c.a.createElement("div",{key:e.id,className:"col-12 col-sm-4 mt-3"},c.a.createElement(U.a,{className:e.party},c.a.createElement(U.a.Title,null,e.first_name," ",e.last_name),c.a.createElement(U.a.Text,null,e.party_affiliation),c.a.createElement("button",{className:"btn btn-secondary",onClick:function(t){N(e),C(3)}},"View ",e.first_name," ",e.last_name)))},j=function(){switch(y){case 0:return c.a.createElement(G,null);case 1:return c.a.createElement(X,null);case 3:return t=g,c.a.createElement(V,{candidate:t,handleSelectCandidate:N,log:e.log});case 4:return r.map((function(e){return O(e)}));case 2:default:return c.a.createElement("div",{className:"container-fluid bg-almostWhite"},c.a.createElement("div",{className:"row "},r.map((function(t){return e.log.debug(t),O(t)}))),c.a.createElement("div",{className:"row mt-3 pb-3"},c.a.createElement("div",{className:"col text-right"},c.a.createElement(u.a,{variant:"secondary",onClick:function(){C(1)}},"Home"))))}var t};return c.a.createElement(p.Consumer,null,(function(e){var t=e.user;return v(t),j()}))},B=a(27);var P=function(e){return e.model.map((function(t,a){return c.a.createElement(B.a,{key:a,className:"pb-3"},c.a.createElement(m.a.Control,{plaintext:!0,readOnly:!0,className:"bg-white text-right pr-3",defaultValue:t.last_name+", "+t.first_name+" / "+t.party_affiliation}),c.a.createElement(B.a.Append,null,c.a.createElement(B.a.Radio,{name:"votingGroup","aria-label":t.last_name+", "+t.first_name+" / "+t.party_affiliation,onChange:function(){return e.handleFormSelect(t)}})))}))};var T=function(e){var t=Object(n.useState)(e.candidate),a=Object(l.a)(t,1)[0],r=Object(n.useState)(0),o=Object(l.a)(r,2),i=o[0],d=o[1],m=function(){switch(i){case 1:return c.a.createElement(X,null);case 0:default:return c.a.createElement("div",{className:"container-fluid bg-almostWhite full-screen"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("h1",null,"You voted for"))),c.a.createElement("div",{className:"row pb-3"},c.a.createElement("div",{className:"col"},c.a.createElement(U.a,null,c.a.createElement(U.a.Body,null,c.a.createElement(U.a.Title,null,a.first_name," ",a.last_name),c.a.createElement(U.a.Text,null,a.party_affiliation))))),c.a.createElement("div",{className:"row pt-3"},c.a.createElement("div",{className:"col"},c.a.createElement("h2",null,"Thank you! Your vote has been registered."))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col right-align-div"},c.a.createElement(u.a,{variant:"secondary w-50",onClick:function(){d(1)}},"Home"))))}};return c.a.createElement(p.Consumer,null,(function(t){return function(t,a){s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,s.a.awrap(f.a.put("/api/voter/".concat(t.uuid,"/").concat(a.id)));case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),e.log.error(n.t0);case 8:case"end":return n.stop()}}),null,null,[[0,5]])}(t.user,a),m()}))};var F=function(e){var t=Object(n.useState)(0),a=Object(l.a)(t,2),r=a[0],o=a[1],i=Object(n.useState)(e.candidate),s=Object(l.a)(i,1)[0],d=function(){switch(r){case 1:return c.a.createElement(Y,null);case 2:return c.a.createElement(T,{candidate:s});case 0:default:return c.a.createElement("div",{className:"container-fluid bg-almostWhite full-screen"},c.a.createElement("div",{className:"row pb-3"},c.a.createElement("div",{className:"col"},c.a.createElement("h1",null,"You are voting for"))),c.a.createElement("div",{className:"row pb-3 text-center"},c.a.createElement("div",{className:"col"},c.a.createElement(U.a,null,c.a.createElement(U.a.Body,null,c.a.createElement(U.a.Title,null,s.first_name," ",s.last_name),c.a.createElement(U.a.Text,null,s.party_affiliation))))),c.a.createElement("div",{className:"row pt-3"},c.a.createElement("div",{className:"col"},c.a.createElement("h1",null,"Is this correct?"))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement(u.a,{variant:"secondary w-100",onClick:function(){o(1)}},"Edit")),c.a.createElement("div",{className:"col"},c.a.createElement(u.a,{variant:"secondary w-100",onClick:function(){o(2)}},"Confirm"))))}};return c.a.createElement(p.Consumer,null,(function(e){e.user;return d()}))};var Y=function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),r=a[0],o=a[1],i=Object(n.useState)(null),d=Object(l.a)(i,2),m=d[0],v=d[1],E=Object(n.useState)(0),b=Object(l.a)(E,2),g=b[0],N=b[1],w=Object(n.useState)(null),h=Object(l.a)(w,2),y=h[0],C=h[1];Object(n.useEffect)((function(){!function(){var t,a;s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,null!==y){n.next=3;break}return n.abrupt("return");case 3:if(0!==g){n.next=13;break}return e.log.debug(y._doc),t=y._doc.location.postcode.replace(/\s/g,""),e.log.debug("Vote loadCandidates with /api/candidates/".concat(t)),n.next=9,s.a.awrap(f.a.get("/api/candidates/".concat(t)));case 9:a=n.sent,e.log.debug("Vote loadCandidates after ",a.data),o(a.data.candidateList),N(2);case 13:n.next=19;break;case 15:n.prev=15,n.t0=n.catch(0),e.log.error(n.t0),o([]);case 19:case"end":return n.stop()}}),null,null,[[0,15]])}()}),[y]);var O=function(t){return s.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:e.log.debug("Vote, candidate selected, candidate is ",t),v(t);case 2:case"end":return a.stop()}}))},j=function(){switch(g){case 0:return c.a.createElement(G,null);case 1:return c.a.createElement(F,{candidate:m,log:e.log});case 2:default:return c.a.createElement("div",{className:"container-fluid bg-almostWhite full-screen"},c.a.createElement("div",{className:"row pt-3"},c.a.createElement("div",{className:"col"},c.a.createElement("h1",null,"Vote in District ",y._doc.location.district))),c.a.createElement("div",{className:"row pt-3 pb-3"},c.a.createElement("div",{className:"col"},c.a.createElement(P,{model:r,handleFormSelect:O}))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col right-align-div"},c.a.createElement(u.a,{variant:"secondary w-50",type:"submit",onClick:function(){N(1)},disabled:null===m},"Vote"))))}};return c.a.createElement(p.Consumer,null,(function(e){var t=e.user;return C(t),j()}))};j.a.accessToken="pk.eyJ1IjoiZXNjaGVyZmFuIiwiYSI6ImNrNHl4bGszeDA1Z2MzZXM3enl3dXAwdGQifQ.GQLGYq0XDlXApqGgkKqF2A",console.log("Landing mapbox access token is ",j.a.accessToken);var Q=function(e){function t(){var e,a;Object(N.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={activeComponentId:0,map:null},a.renderDefault=function(){var e=a.context.user;return c.a.createElement("div",{className:"container-fluid full-screen"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-8 col-sm-9 mt-3 ml-3 bg-white text-center pt-2 mapFormWidget"},"Your district is ",e._doc.location.district),c.a.createElement("div",{className:"col-3 col-sm-2 mt-3"},c.a.createElement(u.a,{variant:"secondary w-100",onClick:function(){a.setState({activeComponentId:2})}},"Edit"))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{ref:function(e){return a.mapContainer=e},className:"col mapContainer"})),c.a.createElement("div",{className:"row pb-3"},c.a.createElement("div",{className:"col"},c.a.createElement(u.a,{variant:"secondary w-100",onClick:function(){a.setState({activeComponentId:3})}},"View Candidates")),c.a.createElement("div",{className:"col"},c.a.createElement(u.a,{variant:"secondary w-100",onClick:function(){a.setState({activeComponentId:4})}},"Vote"))))},a.renderEditDistrict=function(){var e=a.context.user,t={streetNo:e._doc.location.street.number,streetName:e._doc.location.street.name,city:e._doc.location.city,province:e._doc.location.state,postcode:e._doc.location.postcode};return c.a.createElement(D,{location:t})},a.renderViewCandidates=function(){return c.a.createElement(R,{log:a.context.log})},a.renderVote=function(){return c.a.createElement(Y,{log:a.context.log})},a.renderActiveComponent=function(){switch(a.state.activeComponentId){case 4:return a.renderVote();case 3:return a.renderViewCandidates();case 2:return a.renderEditDistrict();case 0:default:return a.renderDefault()}},a}return Object(C.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){if(0===this.state.activeComponentId){var e=this.context.user,t=this.context.log,a=e._doc.location.coordinates.latitude,n=e._doc.location.coordinates.longitude,c=e._doc.location.districtBoundaries;t.debug("voter location is ",e._doc.location);var r=new j.a.Map({container:this.mapContainer,style:"mapbox://styles/mapbox/streets-v11",center:[n,a],zoom:12});t.debug("district boundaries are ",c),r.on("load",(function(){r.addLayer({id:e._doc.location.district,type:"fill",source:{type:"geojson",data:{type:"Feature",geometry:c}},layout:{},paint:{"fill-color":"#D3D3D3","fill-opacity":.8}})})),this.setState({map:r})}}},{key:"componentDidUpdate",value:function(){if(0===this.state.activeComponentId){var e=this.context.user,t=e._doc.location.coordinates.latitude,a=e._doc.location.coordinates.longitude;this.state.map.setCenter([a,t])}}},{key:"render",value:function(){return this.renderActiveComponent()}}]),t}(n.Component);Q.contextType=p;var X=Q,M=a(43),W=a.n(M);console.log("App.js process.env.REACT_APP_LOGGING_LEVEL is ","info"),console.log("App.js mapbox access token is ","pk.eyJ1IjoiZXNjaGVyZmFuIiwiYSI6ImNrNHl4bGszeDA1Z2MzZXM3enl3dXAwdGQifQ.GQLGYq0XDlXApqGgkKqF2A"),A.a.setLevel("info");W.a.apply(A.a,{format:function(e){return{msg:e.message,level:"info",stacktrace:e.stacktrace}},url:"/logger"});var Z=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],r=t[1],o=null;return o=null!=a?c.a.createElement(X,null):c.a.createElement(g,{log:A.a}),c.a.createElement(p.Provider,{value:{user:a,handleLogin:function(e){var t={name:e._doc.name,district:e._doc.location.district,street:e._doc.location.street,city:e._doc.location.city,postcode:e._doc.location.postcode,username:e._doc.login.username};console.log("App Context ",JSON.stringify(t)),A.a.info("App Context ",JSON.stringify(t)),r(e)},log:A.a}},o)};a(75),a(76);o.a.render(c.a.createElement(Z,null),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.cd5c2da3.chunk.js.map