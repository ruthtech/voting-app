{"version":3,"sources":["components/assets/media/canada-flag.svg","utils/UserContext.js","components/Login.js","components/EditDistrictConfirm.js","components/EditDistrict.js","components/LoadingSpinner.js","components/CandidateDetails.js","components/ViewCandidates.js","components/VoteRow.js","components/VoteSubmitted.js","components/VoteConfirm.js","components/Vote.js","components/Landing.js","components/assets/geoJSON/ottawaCentreDistrictBoundaries.js","components/Simulation.js","App.js","index.js"],"names":["module","exports","React","createContext","Login","props","useState","username","setUsername","password","setPassword","UserContext","Consumer","handleLogin","className","Image","src","CanadaFlag","alt","Form","Group","id","Label","Control","type","defaultValue","onChange","event","target","value","Button","variant","onClick","a","async","preventDefault","encodeURI","name","isAdmin","axios","method","url","data","user","isVerified","log","error","handleFormSubmit","EditDistrictConfirm","activeComponentId","setActiveComponentId","renderDefault","debug","location","street","number","city","state","postcode","streetNo","streetName","province","replace","newUser","renderActiveComponent","EditDistrict","context","newLocation","setState","renderBack","console","renderConfirm","voter","coordinates","latitude","longitude","login","DropdownButton","title","Dropdown","Item","controlId","disabled","checkInvalidInput","JSON","parse","stringify","this","trim","Component","contextType","LoadingSpinner","Candidate","getPartyWebsite","party_affiliation","candidate","first_name","last_name","district_name","href","renderCandidateDetails","ViewCandidates","candidates","setCandidates","setVoter","selectedCandidate","setSelectedCandidate","useEffect","query","get","candidateList","loadCandidates","loadPartyColour","renderCandidateThumbnail","key","Card","Title","decodeURI","Text","CandidateDetails","handleSelectCandidate","map","VoteRow","model","index","InputGroup","plaintext","readOnly","Append","Radio","aria-label","handleFormSelect","VoteSubmitted","Body","VoteConfirm","_id","voterId","then","response","hasvoted","catch","Vote","district","mapboxgl","accessToken","process","Landing","ref","el","mapContainer","renderEditDistrict","renderViewCandidates","renderVote","voterLatitude","voterLongitude","newMap","Map","container","style","center","zoom","districtLayerId","on","undefined","getLayer","addLayer","districtBoundaries","isSourceLoaded","setCenter","districtChanged","newDistrict","ottawaCentreDistrictBoundaries","ottawaLayerId","grey","partyColours","Simulation","renderMap","renderResetSimulation","renderSimulation","randomColour","warn","partyColoursIndex","Math","floor","random","length","setPaintProperty","setLevel","info","remote","apply","format","msg","message","level","stacktrace","App","setUser","component","Provider","userSubset","ReactDOM","render","document","getElementById"],"mappings":"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mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,gBAAiB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,iBAAkB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,iBAAkB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,iBAAkB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,iBAAkB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,kBAAmB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,kBAAmB,EAAE,iBAAkB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,iBAAkB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,gBAAiB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,iBAAkB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,gBAAiB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,gBAAiB,mBAAoB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,gBAAiB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,kBAAmB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,gBAAiB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,iBAAkB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,iBAAkB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,oBAAqB,EAAE,eAAgB,kBAAmB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,iBAAkB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,iBAAkB,kBAAmB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,iBAAkB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,oBAAqB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,iBAAkB,oBAAqB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,mBAAoB,EAAE,kBAAmB,oBAAqB,EAAE,kBAAmB,kBAAmB,EAAE,kBAAmB,oBAAqB,EAAE,iBAAkB,oBAAqB,EAAE,kBAAmB,oBAAqB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","file":"static/js/main.ba73c153.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/canada-flag.dea429e4.svg\";","import React from 'react';\r\n\r\nexport default React.createContext();\r\n","// import React from 'react';\r\nimport React, { useState } from 'react';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Image from 'react-bootstrap/Image';\r\nimport Form from 'react-bootstrap/Form';\r\nimport axios from 'axios';\r\nimport UserContext from '../utils/UserContext';\r\nimport CanadaFlag from './assets/media/canada-flag.svg';\r\nimport \"./assets/css/style.css\";\r\n\r\nfunction Login(props) {\r\n  const [username, setUsername] = useState();\r\n  const [password, setPassword] = useState();\r\n\r\n  const handleFormSubmit = async (username, password, handleLogin, event) => {\r\n    try {\r\n      event.preventDefault();\r\n\r\n      username = encodeURI(username);\r\n      if(username==='admin') {\r\n        // Temporary. How do we want to support the adminstrator running the simulation for the user to see?\r\n        handleLogin({ name: \"admin\", isAdmin: true });\r\n        return;\r\n      }\r\n\r\n      const query = `/api/v1/login`;\r\n      const user = await axios({\r\n        method: 'post',\r\n        url: query,\r\n        data: {\r\n          username: username,\r\n          password: password\r\n        }\r\n      });\r\n\r\n      if(!user.data.isVerified) {\r\n        // Either the UUID was not found or the password is incorrect.\r\n        // The page will continue to show this Login page until a user is found & verified.\r\n        props.log.error(`No user found with username ${username} and that password.`);\r\n        handleLogin(null);\r\n        return;\r\n      }\r\n\r\n      // Success\r\n      handleLogin(user.data.isVerified);\r\n    } catch ( err ) {\r\n      props.log.error(`Error while retrieving username ${username} and that password.`);\r\n      props.log.error(err);\r\n\r\n      // null means that no user is logged in.\r\n      handleLogin(null);\r\n    }\r\n  };\r\n\r\n    return (\r\n      <UserContext.Consumer>\r\n      {\r\n        ({handleLogin}) =>\r\n        <div className=\"container-fluid bg-almostWhite full-screen\">\r\n            <div className=\"row flag-block \">\r\n              <Image className=\"bg-white\" src={CanadaFlag} alt=\"Canada Flag\" />\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"col heading\">\r\n                    <h1>Canada Votes Online</h1>\r\n                </div>\r\n            </div>\r\n            <div className=\"row bottom-page\">\r\n                <div className=\"col\">\r\n                  <Form>\r\n                    <Form.Group id=\"formBasicUUID\">\r\n                      <Form.Label className=\"entry-field-label\">Username</Form.Label>\r\n                      <Form.Control type=\"text\" defaultValue={username} onChange={event => setUsername(event.target.value)}/>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group id=\"formBasicPassword\">\r\n                      <Form.Label className=\"entry-field-label\">Password</Form.Label>\r\n                      <Form.Control type=\"password\" defaultValue={password} onChange={event => setPassword(event.target.value)}/>\r\n                    </Form.Group>\r\n\r\n                    <div className=\"right-align-div\">\r\n                      <Button variant=\"secondary\" type=\"submit\" onClick={(event) => {handleFormSubmit(username, password, handleLogin, event)}}>\r\n                        Sign in\r\n                      </Button>\r\n                    </div>\r\n                  </Form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n      }\r\n      </UserContext.Consumer>\r\n    );\r\n}\r\n\r\nexport default Login;\r\n","import React, { useState } from 'react';\r\nimport Button from 'react-bootstrap/Button';\r\nimport axios from 'axios';\r\nimport \"./assets/css/style.css\";\r\nimport Landing from './Landing';\r\nimport EditDistrict from './EditDistrict';\r\nimport UserContext from '../utils/UserContext';\r\n\r\nfunction EditDistrictConfirm(props) {\r\n  const [activeComponentId, setActiveComponentId] = useState(0); // 0 is render default (this confirmation page) and 1 is go back and edit (edit district), 2 is for landing\r\n\r\n    const handleFormSubmit = async (handleLogin) => {\r\n      try {\r\n        const username = encodeURI(props.username);\r\n        const streetNo = encodeURI(props.location.street.number);\r\n        const streetName = encodeURI(props.location.street.name);\r\n        const city = encodeURI(props.location.city);\r\n        const province = encodeURI(props.location.state);\r\n        const postcode = encodeURI(props.location.postcode.replace(/\\s/g, \"\"));\r\n        let newUser = await axios({\r\n          method: 'put',\r\n          url: '/api/v1/voters/' + username,\r\n          data: {\r\n            streetNo: streetNo,\r\n            streetName: streetName,\r\n            city: city,\r\n            province: province,\r\n            postcode: postcode\r\n          }\r\n        });\r\n    \r\n        props.log.debug(\"EditDistrictConfirm, newUser.data \", newUser.data);\r\n        handleLogin(newUser.data); // Update the user in the context.\r\n        props.log.debug(\"EditDistrictConfirm after handleLogin\"); \r\n      } catch ( err ) {\r\n        props.log.error(err);\r\n      }\r\n    };\r\n\r\n    // active component id 1\r\n    const renderEditDistrict = () => {\r\n      return <EditDistrict location={props.location}/>;\r\n    };\r\n\r\n    // active component id 2\r\n    const renderHome = () => {\r\n      return <Landing />;\r\n    };\r\n\r\n    // active component id 0\r\n    const renderDefault = (handleLogin) => {\r\n      props.log.debug(\"EditDistrictConfirm render default location is \", props.location);\r\n      return (\r\n        <div className=\"container-fluid bg-almostWhite full-screen\">\r\n        <div className=\"row pt-3\">\r\n          <div className=\"col\">\r\n            <h4>Is this correct?</h4>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <h6>If there were any problems locating the address that you entered, the closest address is displayed below.</h6>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col bg-white centre-align-div\">\r\n            <p>{props.location.street.number} {props.location.street.name}, {props.location.city}, {props.location.state}, {props.location.postcode}</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <Button variant=\"secondary w-100\" type=\"button\" \r\n              onClick={ () => { setActiveComponentId(1)}}>\r\n              Edit\r\n            </Button>\r\n          </div>\r\n          <div className=\"col\">\r\n            <Button variant=\"secondary w-100\" type=\"submit\" \r\n                onClick={\r\n                () => {\r\n                  handleFormSubmit(handleLogin);\r\n                  setActiveComponentId(2);\r\n                }}>\r\n              Confirm\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      );\r\n    };\r\n\r\n    const renderActiveComponent = (handleLogin) => {\r\n      switch(activeComponentId) {\r\n        case(1): {\r\n          return renderEditDistrict();\r\n        }\r\n\r\n        case(2): {\r\n          return renderHome();\r\n        }\r\n\r\n        case(0):\r\n        default: {\r\n          return renderDefault(handleLogin);\r\n        }\r\n      }\r\n    };\r\n\r\n    return (\r\n      <UserContext.Consumer >\r\n       {\r\n         ({handleLogin}) => {\r\n           return renderActiveComponent(handleLogin)\r\n         }\r\n      }\r\n       </UserContext.Consumer>\r\n      );\r\n}\r\n\r\nexport default EditDistrictConfirm;\r\n","import React, { Component } from 'react';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Dropdown from 'react-bootstrap/Dropdown';\r\nimport DropdownButton from 'react-bootstrap/DropdownButton';\r\nimport Button from 'react-bootstrap/Button';\r\nimport axios from 'axios';\r\nimport UserContext from '../utils/UserContext';\r\nimport EditDistrictConfirm from './EditDistrictConfirm';\r\nimport Landing from './Landing';\r\nimport \"./assets/css/style.css\";\r\nimport log from 'loglevel';\r\n\r\nclass EditDistrict extends Component {\r\n  // Location data is not escaped until right before it is sent to axios. \r\n  // Sending in location instead of user/voter because the query to the server to find out if the address exists isn't associated with a user. \r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      location: JSON.parse(JSON.stringify(props.location)), // Create a deep copy of the location instead of modifying the location directly. This way if the user cancels before saving the original address is preserved.\r\n      activeComponentId: 0 // 0 means render default form, 1 means EditDistrictConfirm\r\n    }\r\n  \r\n  }\r\n\r\n  handleFormSubmit = async (event) => {\r\n    try {\r\n      event.preventDefault();\r\n      const log = this.context.log;\r\n      // Check if the address is valid or not. If it's not, replace it with the nearest valid address.\r\n      // escape is deprecated and doesn't work on the Quebec city names with accents. Use encodeURI instead.\r\n\r\n      const streetNo = encodeURI(this.state.location.street.number);\r\n      const streetName = encodeURI(this.state.location.street.name);\r\n      const city = encodeURI(this.state.location.city);\r\n      const province = encodeURI(this.state.location.state);\r\n      const postcode = encodeURI(this.state.location.postcode.replace(/\\s/g, \"\"));\r\n\r\n\r\n      log.debug(`EditDistrict about to call /api/v1/verifyAddress/${streetNo}/${streetName}/${city}/${province}/${postcode}`);\r\n      let newLocation = await axios({\r\n        method: 'post',\r\n        url: '/api/v1/verifyAddress',\r\n        data: {\r\n          streetNo: streetNo,\r\n          streetName: streetName,\r\n          city: city,\r\n          province: province,\r\n          postcode: postcode\r\n        }\r\n      });\r\n      log.debug(\"EditDistrict, newLocation is \", newLocation.data);\r\n      this.setState({ location: newLocation.data });\r\n      log.debug(\"EditDistrict, after new location state is \", this.state.location);\r\n      this.setState({ activeComponentId: 1 });; // switch to the Edit District Confirm page\r\n    } catch( err ) {\r\n      log.error(err);\r\n    }\r\n  }\r\n\r\n  checkInvalidInput() {\r\n    // Check that the user isn't making the address blank or something that cannot be sent to the server\r\n    if(this.state.location.street.number === \"\") return true;\r\n    if(this.state.location.street.name.trim() === \"\") return true;\r\n    if(this.state.location.city.trim() === \"\") return true;\r\n    if(this.state.location.postcode.trim() === \"\") return true;\r\n    if(this.state.location.state.trim() === \"\") return true;\r\n\r\n    return false;\r\n  }\r\n\r\n  // active component id 2\r\n  renderBack = () => {\r\n    console.log(\"location is \", this.state.location);\r\n    console.log(\"props location is \", this.props.location);\r\n    return <Landing />;\r\n  };\r\n\r\n  // active component id 1\r\n  renderConfirm = () => {\r\n    const voter = this.context.user;\r\n    const log = this.context.log;\r\n    log.debug(\"EditDistrict about to confirm, latitude is \" + this.state.location.coordinates.latitude + \" and longitude are \" + this.state.location.coordinates.longitude);\r\n    return <EditDistrictConfirm location={this.state.location} username={voter.login.username} log={log}/>\r\n  };\r\n\r\n  // active component id 0\r\n  renderDefault = () => {\r\n    return (\r\n      <div className=\"container-fluid bg-almostWhite full-screen\">\r\n          <div className=\"row\">\r\n              <div className=\"col\">\r\n                  <h1>Enter your new address</h1>\r\n              </div>\r\n          </div>\r\n          <div className=\"row pb-3\">\r\n            <div className=\"col \">\r\n              <Form>\r\n                  <Form.Group id=\"formBasicAddress\">\r\n                    <Form.Label id=\"streetNoLabel\" className=\"entry-field-label\">Street Number</Form.Label>\r\n                    <Form.Control id=\"streetNo\" type=\"number\" value={this.state.location.street.number} onChange={\r\n                      event => {\r\n                        let newLocation = {...this.state.location};\r\n                        newLocation.street.number = event.target.value;\r\n                        this.setState({ location: newLocation});\r\n                      }} />\r\n                    <Form.Label className=\"entry-field-label\">Address</Form.Label>\r\n                    <Form.Control type=\"text\" value={this.state.location.street.name} onChange={\r\n                      event => {\r\n                        let newLocation = {...this.state.location};\r\n                        newLocation.street.name = event.target.value;\r\n                        this.setState({ location: newLocation});\r\n                      }} />\r\n                  </Form.Group>\r\n\r\n                  <Form.Group id=\"formBasicCity\">\r\n                    <Form.Label className=\"entry-field-label\">City</Form.Label>\r\n                    <Form.Control type=\"text\" value={this.state.location.city} onChange={event => this.setState({ location: {...this.state.location, city:event.target.value}})}/>\r\n                  </Form.Group>\r\n\r\n                  <Form.Group id=\"formBasicPostalcode\">\r\n                    <Form.Label className=\"entry-field-label\">Postal Code</Form.Label>\r\n                    <Form.Control type=\"text\" value={this.state.location.postcode} onChange={event => this.setState({ location: {...this.state.location, postcode:event.target.value}})}/>\r\n                  </Form.Group>\r\n\r\n                  <Form.Group value={this.state.location.state} className=\"right-align-div\">\r\n                    <DropdownButton id=\"provinceDropdown\" title=\"Province/Territory\" variant=\"secondary\">\r\n                      <Dropdown.Item id=\"Alberta\" onClick={() => {this.setState({ location: {...this.state.location, state:'Alberta'}})}}>Alberta</Dropdown.Item>\r\n                      <Dropdown.Item id=\"BritishColumbia\" onClick={() => this.setState({ location: {...this.state.location, state:'British Columbia'}})}>British Columbia</Dropdown.Item>\r\n                      <Dropdown.Item id=\"Manitoba\" onClick={() => this.setState({ location: {...this.state.location, state:'Manitoba'}})}>Manitoba</Dropdown.Item>\r\n                      <Dropdown.Item id=\"NewBrunswick\" onClick={() => this.setState({ location: {...this.state.location, state:'New Brunswick'}})}>New Brunswick</Dropdown.Item>\r\n                      <Dropdown.Item id=\"NewfoundlandandLabrador\" onClick={() => this.setState({ location: {...this.state.location, state:'Newfoundland and Labrador'}})}>Newfoundland and Labrador</Dropdown.Item>\r\n                      <Dropdown.Item id=\"NorthwestTerritories\" onClick={() => this.setState({ location: {...this.state.location, state:'Northwest Territories'}})}>Northwest Territories</Dropdown.Item>\r\n                      <Dropdown.Item id=\"NovaScotia\" onClick={() => this.setState({ location: {...this.state.location, state:'Nova Scotia'}})}>Nova Scotia</Dropdown.Item>\r\n                      <Dropdown.Item id=\"Nunavut\" onClick={() => this.setState({ location: {...this.state.location, state:'Nunavut'}})}>Nunavut</Dropdown.Item>\r\n                      <Dropdown.Item id=\"Ontario\" onClick={() => this.setState({ location: {...this.state.location, state:'Ontario'}})}>Ontario</Dropdown.Item>\r\n                      <Dropdown.Item id=\"PrinceEdwardIsland\" onClick={() => this.setState({ location: {...this.state.location, state:'Prince Edward Island'}})}>Prince Edward Island</Dropdown.Item>\r\n                      <Dropdown.Item id=\"Quebec\" onClick={() => this.setState({ location: {...this.state.location, state:'Quebec'}})}>Quebec</Dropdown.Item>\r\n                      <Dropdown.Item id=\"Saskatchewan\" onClick={() => this.setState({ location: {...this.state.location, state:'Saskatchewan'}})}>Saskatchewan</Dropdown.Item>\r\n                      <Dropdown.Item id=\"Yukon\" onClick={() => this.setState({ location: {...this.state.location, state:'Yukon'}})}>Yukon</Dropdown.Item>\r\n                    </DropdownButton>\r\n                  </Form.Group>\r\n\r\n                  <Form.Group controlId=\"formSubmit\" className=\"centre-align-div\">\r\n                    <Button variant=\"secondary w-50 mr-3\" type=\"button\" \r\n                      onClick={ () => { this.setState({ activeComponentId: 2 }); } }>\r\n                      Home\r\n                    </Button>\r\n                    <Button variant=\"secondary w-50 ml-3\" type=\"submit\" \r\n                      onClick={(event) => {\r\n                        this.handleFormSubmit(event); // Check that the address exists and send it, or the closest matching existing address, to the confirmation page.\r\n                      }} disabled={this.checkInvalidInput()}>\r\n                      Next\r\n                    </Button>\r\n                  </Form.Group>\r\n                </Form>\r\n            </div>\r\n          </div>\r\n      </div>\r\n    )\r\n  };\r\n\r\n  renderActiveComponent = () => {\r\n    switch(this.state.activeComponentId) {\r\n      case(2): {\r\n        return this.renderBack();\r\n      }\r\n\r\n      case(1): {\r\n        return this.renderConfirm();\r\n      }\r\n\r\n      case(0):\r\n      default: {\r\n        return this.renderDefault();\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return this.renderActiveComponent();\r\n  }\r\n}\r\nEditDistrict.contextType = UserContext;\r\n\r\nexport default EditDistrict;\r\n","import React from 'react';\r\n\r\nfunction LoadingSpinner() {\r\n\r\n    return (\r\n        <div>\r\n            <i className=\"fa fa-spinner fa-spin\" /> Loading...\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LoadingSpinner;\r\n\r\n\r\n\r\n","import React, { useState } from 'react';\r\nimport Button from 'react-bootstrap/Button';\r\n// import Image from 'react-bootstrap/Image';\r\n// import Card from 'react-bootstrap/Card';\r\nimport Landing from './Landing';\r\nimport ViewCandidates from './ViewCandidates';\r\nimport \"./assets/css/style.css\";\r\n\r\nfunction Candidate(props) {\r\n    const [activeComponentId, setActiveComponentId] = useState(0); // 0 is for candidate details, 1 is for list of candidates, 2 is for Landing\r\n\r\n    const getPartyWebsite = (party_affiliation) => {\r\n        switch(party_affiliation) {\r\n            case('Conservative Party of Canada'): {\r\n                return \"http://www.conservative.ca\";\r\n            }\r\n\r\n            case('Green Party of Canada'): {\r\n                return \"http://greenparty.ca\";\r\n            }\r\n\r\n            case('Liberal Party of Canada'): {\r\n                return \"http://www.liberal.ca\";\r\n            }\r\n\r\n            case(\"New Democratic Party\"): {\r\n                return \"http://www.ndp.ca\";\r\n            }\r\n\r\n            case(\"Bloc Québécois\"): {\r\n                return \"http://blocquebecois.org\";\r\n            }\r\n\r\n            default: {\r\n                return \"https://www.elections.ca/content.aspx?section=pol&dir=par&document=index&lang=e\"; // indicate no party website by directing them to the general Elections Canada web site listing all of them\r\n            }\r\n        }\r\n    }\r\n\r\n    // Active component Id 0\r\n    const renderCandidateDetails = () => {\r\n        const candidate = props.candidate;\r\n        return (\r\n            <div className=\"container-fluid full-screen bg-almostWhite\">\r\n                <div className=\"row\">\r\n                    {/* <div className=\"col text-center\">\r\n                        <Image src={candidate.pictureURL} />\r\n                    </div> */}\r\n                    <div className=\"col\">\r\n                        <h1>{candidate.first_name} {candidate.last_name}</h1>\r\n                        <h5>{candidate.party_affiliation}</h5>\r\n                        <h5>{candidate.district_name}</h5>\r\n                    </div>\r\n                </div>\r\n                {/* <div className=\"row\">\r\n                  <div className=\"col\">\r\n                    <Card className={candidate.party}>\r\n                      <Card.Body>\r\n                        <Card.Title>Contact</Card.Title>\r\n                        <Card.Text><b>Phone:</b> {candidate.phone}</Card.Text>\r\n                        <Card.Text><b>Office Address:</b> {candidate.address}</Card.Text>\r\n                        <Card.Text><b>Email:</b> {candidate.email}</Card.Text>\r\n                        <Card.Text><b>Twitter:</b> <Card.Link href={candidate.twitter}>{candidate.twitter}</Card.Link></Card.Text>\r\n                        <Card.Text><b>Website:</b> <Card.Link href={candidate.website}>{candidate.website}</Card.Link></Card.Text>                      \r\n                      </Card.Body>\r\n                    </Card>\r\n                  </div>\r\n                </div> */}\r\n                <div className=\"row\">\r\n                    <div className=\"col centre-align-div\">\r\n                        <h4><a href={getPartyWebsite(candidate.party_affiliation)}>{candidate.party_affiliation}</a></h4>\r\n                    </div>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <div className=\"col centre-align-div\">\r\n                        <h4><a href=\"https://www.elections.ca/content.aspx?section=pol&dir=par&document=index&lang=e\">Elections Canada Registered Political Parties</a></h4>\r\n                    </div>\r\n                </div>\r\n                <div className=\"row p-3\">\r\n                    <div className=\"col\">\r\n                        <Button variant=\"secondary w-100\" onClick={ () => { setActiveComponentId(1) }}>View Candidates</Button>\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <Button variant=\"secondary w-100\" onClick={ () => { setActiveComponentId(2) }}>Home</Button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Active component id 1\r\n    const renderAllCandidates = () => {\r\n        return <ViewCandidates log={props.log}/>;\r\n    }\r\n\r\n    // Active component id 2\r\n    const renderHome = () => {\r\n        return (\r\n          <Landing />\r\n        );\r\n    }    \r\n\r\n    const renderActiveComponent = () => {\r\n        switch (activeComponentId) {\r\n            case(2): {\r\n              return renderHome();\r\n            }\r\n      \r\n            case(1): {\r\n              return renderAllCandidates();\r\n            }\r\n      \r\n            case(0): \r\n            default: {\r\n              return renderCandidateDetails();\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        renderActiveComponent()\r\n    );\r\n}\r\n\r\nexport default Candidate;\r\n","import React, {useState, useEffect} from 'react';\r\nimport axios from 'axios';\r\nimport Button from 'react-bootstrap/Button';\r\nimport UserContext from '../utils/UserContext';\r\nimport LoadingSpinner from './LoadingSpinner';\r\nimport Landing from './Landing';\r\nimport CandidateDetails from './CandidateDetails';\r\nimport Card from 'react-bootstrap/Card';\r\nimport \"./assets/css/style.css\";\r\n\r\nfunction ViewCandidates(props) {\r\n    const [candidates, setCandidates] = useState([]);\r\n    const [voter, setVoter] = useState(null);\r\n    const [selectedCandidate, setSelectedCandidate] = useState(null); \r\n    const [activeComponentId, setActiveComponentId] = useState(0); // 0 for Loading, 1 for Landing, 2 for list of candidates\r\n\r\n    useEffect(() => {\r\n      async function loadCandidates() {\r\n        try {\r\n          if(voter === null) {\r\n            // Not ready to load candidates until we know what district the user is in\r\n            return;\r\n          }\r\n  \r\n          if(activeComponentId === 0) {\r\n            let postcode = voter.location.postcode.replace(/\\s/g, \"\");\r\n            const query = `/api/v1/candidates/${postcode}`;\r\n            props.log.debug(query);\r\n            const candidates = await axios.get(query);\r\n            props.log.debug(\"View Candidates found \", candidates);\r\n            setCandidates(candidates.data.candidateList);\r\n            setActiveComponentId(2);\r\n          }\r\n        }\r\n        catch( err ) {\r\n          props.log.error(err);\r\n          setCandidates([]);\r\n        }\r\n      }\r\n      loadCandidates();\r\n    }, [voter]);\r\n\r\n    const loadPartyColour = (candidate) => {\r\n      switch(candidate.party_affiliation) {\r\n        case('New Democratic Party'): {\r\n          return 'ndp'; // the name of the class in the style.css file\r\n        }\r\n\r\n        case('Green Party of Canada'): {\r\n          return 'green';\r\n        }\r\n\r\n        case('Conservative Party of Canada'): {\r\n          return 'pc';\r\n        }\r\n\r\n        case('Liberal Party of Canada'): {\r\n          return 'liberal';\r\n        }\r\n\r\n        case('Bloc Qu�b�cois'): {\r\n          return 'bloc';\r\n        }\r\n\r\n        default: {\r\n          return 'other';\r\n        }\r\n      }\r\n    }\r\n\r\n    const renderDefault = () => {\r\n      return (\r\n        <div className=\"container-fluid bg-almostWhite\">\r\n          <div className=\"row \">\r\n            {\r\n             candidates.map( (candidate) => {\r\n              props.log.debug(candidate)\r\n               return renderCandidateThumbnail(candidate);\r\n             })\r\n            }\r\n          </div>\r\n          <div className=\"row mt-3 pb-3\">\r\n            <div className=\"col text-right\">\r\n                <Button variant=\"secondary\" onClick={ () => { setActiveComponentId(1) } }>\r\n                Home\r\n                </Button>\r\n            </div>\r\n          </div>\r\n      </div>\r\n      );\r\n    }\r\n\r\n    const renderHome = () => {\r\n      return (\r\n        <Landing />\r\n      );\r\n    }\r\n  \r\n    const renderCandidateDetails = (candidate) => {\r\n      return <CandidateDetails candidate={candidate} handleSelectCandidate={setSelectedCandidate} log={props.log}/>\r\n    };\r\n  \r\n    const renderCandidateThumbnail = (candidate) => {\r\n      return (\r\n        <div key={candidate.id} className=\"col-12 mt-3\">\r\n        <Card className={loadPartyColour(candidate)}>         \r\n          {/* <Card.Img variant=\"top\" src={candidate.pictureURL}   /> */}\r\n          <Card.Title>{decodeURI(candidate.first_name)} {decodeURI(candidate.last_name)}</Card.Title>\r\n          <Card.Text>\r\n          {decodeURI(candidate.party_affiliation)}\r\n          </Card.Text>\r\n          <button className=\"btn btn-secondary\" \r\n            onClick={(event) => {\r\n              setSelectedCandidate(candidate);\r\n              setActiveComponentId(3);\r\n            }}>\r\n            View {candidate.first_name} {candidate.last_name}</button>\r\n        </Card>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const renderActiveComponent = () => {\r\n      switch(activeComponentId) {\r\n        case(0): {\r\n          return <LoadingSpinner />;\r\n        }\r\n\r\n        case(1): {\r\n          return renderHome();\r\n        }\r\n\r\n        case(3): {\r\n          return renderCandidateDetails(selectedCandidate);\r\n        }\r\n\r\n        case(4): {\r\n          return candidates.map( (candidate) => {\r\n            return renderCandidateThumbnail(candidate);\r\n          });\r\n        }\r\n\r\n        case(2):\r\n        default: {\r\n          return renderDefault();\r\n        }\r\n      }\r\n    }\r\n\r\n    return (\r\n      <UserContext.Consumer>\r\n       {\r\n         ({user}) => {\r\n           setVoter(user);\r\n\r\n           return renderActiveComponent();\r\n         }\r\n       }\r\n      </UserContext.Consumer>\r\n    );\r\n}\r\n\r\nexport default ViewCandidates;\r\n","import React from 'react';\r\nimport InputGroup from 'react-bootstrap/InputGroup';\r\n// import FormControl from 'react-bootstrap/FormControl';\r\nimport Form from 'react-bootstrap/Form';\r\nimport \"./assets/css/style.css\";\r\n\r\nfunction VoteRow(props) {\r\n  return props.model.map( (candidate, index) => {\r\n    return (\r\n      <InputGroup key={index} className=\"pb-3\">\r\n        <Form.Control plaintext readOnly className=\"bg-white text-right pr-3\" defaultValue={candidate.last_name + \", \" + candidate.first_name + ' / ' + candidate.party_affiliation} />\r\n        <InputGroup.Append>\r\n          <InputGroup.Radio name=\"votingGroup\" aria-label={candidate.last_name + \", \" + candidate.first_name + ' / ' + candidate.party_affiliation} onChange={() => props.handleFormSelect(candidate)}/>\r\n        </InputGroup.Append>\r\n      </InputGroup>\r\n    );\r\n  });\r\n}\r\n\r\nexport default VoteRow;","import React, {useState} from 'react';\r\nimport Card from 'react-bootstrap/Card';\r\nimport Button from 'react-bootstrap/Button';\r\nimport UserContext from '../utils/UserContext';\r\nimport Landing from \"./Landing\";\r\nimport \"./assets/css/style.css\";\r\n\r\nfunction VoteSubmitted(props) {\r\n    const [candidate] = useState(props.candidate);\r\n    const [activeComponentId, setActiveComponentId] = useState(0); // 0 means the confirmation message, 1 means landing page\r\n\r\n    // active id 1\r\n    const renderHome = () => {\r\n        return <Landing />;\r\n    }\r\n\r\n    // active id 0\r\n    const renderDefault = () => {\r\n        return (\r\n            <div className={\"container-fluid bg-almostWhite full-screen\"} >\r\n                <div className=\"row\">\r\n                    <div className=\"col\">\r\n                        <h1>You voted for</h1>\r\n                    </div>\r\n                </div>\r\n                <div className=\"row pb-3 text-center\">\r\n                    <div className=\"col\">\r\n                    <Card>\r\n                        <Card.Body>\r\n                        <Card.Title>{candidate.first_name} {candidate.last_name}</Card.Title>\r\n                        <Card.Text>{candidate.party_affiliation}</Card.Text>\r\n                        </Card.Body>\r\n                    </Card>\r\n                    </div>\r\n                </div>\r\n                <div className=\"row pt-3\">\r\n                    <div className=\"col\">\r\n                        <h2>Thank you! Your vote has been registered.</h2>\r\n                    </div>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <div className=\"col right-align-div\">\r\n                        <Button variant=\"secondary w-50\" onClick={() => {setActiveComponentId(1)}}>Home</Button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const renderActiveComponent = () => {\r\n        switch(activeComponentId) {\r\n            case(1): {\r\n                return renderHome();\r\n            }\r\n\r\n            case(0):\r\n            default: {\r\n                return renderDefault();\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <UserContext.Consumer>\r\n        {  \r\n          ({user}) => {\r\n            return renderActiveComponent();\r\n          }\r\n        }\r\n        </UserContext.Consumer>\r\n    );\r\n}\r\n\r\nexport default VoteSubmitted;\r\n","import React, { useState } from 'react';\r\nimport Card from 'react-bootstrap/Card';\r\nimport Button from 'react-bootstrap/Button';\r\nimport UserContext from '../utils/UserContext';\r\nimport Vote from \"./Vote\";\r\nimport VoteSubmitted from \"./VoteSubmitted\";\r\nimport axios from \"axios\";\r\nimport \"./assets/css/style.css\";\r\n\r\nfunction VoteConfirm(props) {\r\n    const [activeComponentId, setActiveComponentId] = useState(0); // 0 is for default, 1 is for edit/go back, 2 is for save/confirm\r\n    const [candidate] = useState(props.candidate);\r\n    const [voter] = useState(props.voter);\r\n\r\n    // Active Component Id 0\r\n    const renderDefault = () => {\r\n      return (\r\n        <div className={\"container-fluid bg-almostWhite full-screen\"}>\r\n            <div className=\"row pb-3\">\r\n                <div className=\"col\">\r\n                    <h1>You are voting for</h1>\r\n                </div>\r\n            </div>\r\n            <div className=\"row pb-3 text-center\">\r\n                <div className=\"col\">\r\n                  <Card>\r\n                    <Card.Body>\r\n                      <Card.Title>{candidate.first_name} {candidate.last_name}</Card.Title>\r\n                      <Card.Text>{candidate.party_affiliation}</Card.Text>\r\n                    </Card.Body>\r\n                  </Card>\r\n                </div>\r\n            </div>\r\n            <div className=\"row pt-3\">\r\n                <div className=\"col\">\r\n                    <h1>Is this correct?</h1>\r\n                </div>\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"col\">\r\n                    <Button variant=\"secondary w-100\" onClick={() => {setActiveComponentId(1)}}>Edit</Button>\r\n                </div>\r\n                <div className=\"col\">\r\n                    <Button variant=\"secondary w-100\" onClick={() => {setActiveComponentId(2)}}>Confirm</Button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    // active component id 1\r\n    const renderEditVote = () => {\r\n        return <Vote log={props.log} />;\r\n    }\r\n\r\n    // active component id 2\r\n    const renderConfirm = (handleLogin) => {\r\n        // Submit the vote\r\n        const query = `/api/v1/candidates/${candidate._id}`;\r\n        props.log.debug(\"candidate is \", candidate);\r\n        props.log.debug(query);\r\n        axios({\r\n            method: 'put',\r\n            url: query,\r\n            data: {\r\n                voterId: voter._id\r\n            }\r\n        })\r\n        .then(function(response){\r\n            props.log.debug(\"vote submitted and response is \", response);\r\n\r\n            // Now that the vote is updated in the database, since we're not retrieving the voter object\r\n            // that we're working with (i.e., it will still have \"hasvoted\" as null), update the voter\r\n            // object directly to show that this voter has voted. Since Mongoose has this as a String, \r\n            // keep it as a string instead of a boolean.\r\n            voter.hasvoted = 'true';\r\n            handleLogin(voter);\r\n        })\r\n        .catch(function(error) {\r\n            props.log.error(error);\r\n        });\r\n\r\n        return <VoteSubmitted candidate={candidate} log={props.log} />;\r\n    }\r\n\r\n    const renderActiveComponent = (handleLogin) => {\r\n        switch(activeComponentId) {\r\n            case(1): {\r\n                return renderEditVote();\r\n            }\r\n\r\n            case(2): {\r\n                return renderConfirm(handleLogin);\r\n            }\r\n\r\n            case(0):\r\n            default: {\r\n                return renderDefault();\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n      <UserContext.Consumer>\r\n      {\r\n        ({handleLogin}) => renderActiveComponent(handleLogin)\r\n      }\r\n      </UserContext.Consumer>\r\n    );\r\n}\r\n\r\nexport default VoteConfirm;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Button from 'react-bootstrap/Button';\r\nimport VoteRow from './VoteRow';\r\nimport axios from 'axios';\r\nimport UserContext from '../utils/UserContext';\r\nimport VoteConfirm from './VoteConfirm';\r\nimport LoadingSpinner from './LoadingSpinner';\r\nimport Landing from './Landing';\r\n\r\n// When debugging the React code, set the user data as though they logged in via Login.\r\n// When not debugging, comment out the below import.\r\n// import { ottawaCentreCandidatesList } from '../debugReact'; \r\n\r\nimport \"./assets/css/style.css\";\r\n\r\n\r\nfunction Vote(props) {\r\n  const [candidates, setCandidates] = useState([]);\r\n  const [selectedCandidate, setSelectedCandidate] = useState(null);\r\n  const [activeComponentId, setActiveComponentId] = useState(0); // 0 for the loading spinner, 1 for the page listing all of the voting rows, 2 for vote confirm, and 3 for landing\r\n  const [voter, setVoter] = useState(null);\r\n\r\n  useEffect( () => {\r\n    async function loadCandidates() {\r\n      try {\r\n        if(voter === null) {\r\n          // Not ready to load candidates until we know what district the user is in\r\n          return;\r\n        }\r\n  \r\n        if(activeComponentId === 0) {\r\n          props.log.debug(voter);\r\n          let postcode = voter.location.postcode.replace(/\\s/g, \"\");\r\n          const query = `/api/v1/candidates/${postcode}`;\r\n          props.log.debug(`Vote loadCandidates with ${query}`);\r\n          const candidates = await axios.get(query);\r\n          props.log.debug(\"Vote loadCandidates after \", candidates.data);\r\n          setCandidates(candidates.data.candidateList);\r\n\r\n          // FOR DEBUGGING REACT. Comment out and replace with the line above when in production.\r\n          // setCandidates(ottawaCentreCandidatesList);\r\n          // END DEBUGGING REACT\r\n          setActiveComponentId(2);\r\n        }\r\n      }\r\n      catch( err ) {\r\n          props.log.error(err);\r\n          setCandidates([]);\r\n      }\r\n    };\r\n    loadCandidates();  \r\n  }, [voter]);\r\n\r\n\r\n  const handleFormSelect = async (candidate) => {\r\n    props.log.debug(\"Vote, candidate selected, candidate is \", candidate);\r\n    setSelectedCandidate(candidate);\r\n  };\r\n\r\n  // Active Component Id 0\r\n  const renderLoading = () => {\r\n    return <LoadingSpinner />;\r\n  };\r\n\r\n  // Active Component Id 1\r\n  const renderDefault = () => {\r\n    return  (\r\n      <div className=\"container-fluid bg-almostWhite full-screen\">\r\n        <div className=\"row pt-3\">\r\n          <div className=\"col\">\r\n            <h1>Vote in District {voter.location.district}</h1>\r\n          </div>\r\n        </div>\r\n        <div className=\"row pt-3 pb-3\">\r\n            <div className=\"col\">\r\n                <VoteRow\r\n                  model={candidates}\r\n                  handleFormSelect={handleFormSelect}\r\n                />\r\n            </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <Button variant=\"secondary w-100\" type=\"submit\" onClick={\r\n              () => { setActiveComponentId(3) }} >\r\n              Home\r\n            </Button>\r\n          </div>\r\n          <div className=\"col\">\r\n            <Button variant=\"secondary w-100\" type=\"submit\" onClick={\r\n              () => { setActiveComponentId(1) }} disabled={selectedCandidate===null}>\r\n              Vote\r\n            </Button>\r\n          </div>\r\n        </div>\r\n    </div>\r\n    );\r\n  };\r\n\r\n  // Active Component Id 2\r\n  const renderVoteConfirm = () => {\r\n    return <VoteConfirm candidate={selectedCandidate} log={props.log} voter={voter}/>\r\n  };\r\n\r\n  // Active Component Id 3\r\n  const renderHome = () => {\r\n    return <Landing />;\r\n  };\r\n\r\n  const renderActiveComponent = () => {\r\n    switch(activeComponentId) {\r\n      case(0): {\r\n        return renderLoading();\r\n      }\r\n\r\n      case(1): {\r\n        return renderVoteConfirm();\r\n      }\r\n\r\n      case(3): {\r\n        return renderHome();\r\n      }\r\n\r\n      case(2):\r\n      default: {\r\n        return renderDefault();\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <UserContext.Consumer>\r\n    {\r\n      ({user}) => {\r\n        setVoter(user);\r\n        return renderActiveComponent();\r\n      }\r\n    }\r\n    </UserContext.Consumer>\r\n  );\r\n}\r\n\r\nexport default Vote;\r\n","import React, { Component } from \"react\";\r\nimport UserContext from '../utils/UserContext';\r\nimport 'mapbox-gl/dist/mapbox-gl.css';\r\nimport \"./assets/css/style.css\";\r\nimport mapboxgl from 'mapbox-gl';\r\nimport Button from 'react-bootstrap/Button';\r\nimport EditDistrict from \"./EditDistrict\";\r\nimport ViewCandidates from './ViewCandidates';\r\nimport Vote from './Vote';\r\n\r\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOX_API_TOKEN;\r\n\r\n// const ottawaLat = 45.416667;\r\n// const ottawaLong = -75.7;\r\n\r\nclass Landing extends Component {\r\n  state = {\r\n    activeComponentId: 0,\r\n    map: null\r\n  };\r\n\r\n  district = \"\"; // If the district changes, the map needs a new layer added and then the map needs to be refreshed. \r\n\r\n  componentDidMount() {\r\n    if(this.state.activeComponentId === 0) {\r\n      const voter = this.context.user;\r\n      const log = this.context.log;\r\n      const voterLatitude = voter.location.coordinates.latitude;\r\n      const voterLongitude = voter.location.coordinates.longitude;\r\n      log.debug(\"Landing componentDidMount voter location is \", voter.location);\r\n\r\n      const newMap = new mapboxgl.Map({\r\n        container: this.mapContainer,\r\n        style: 'mapbox://styles/mapbox/streets-v11',\r\n        center: [voterLongitude, voterLatitude],\r\n        zoom: 12\r\n      });\r\n\r\n      let districtLayerId = voter.location.district.replace(/\\s/g, \"\");\r\n\r\n      // Originally I had taken out the 'add layer on load' because it worked\r\n      // without that event listener on my local production environment.\r\n      //\r\n      // On Heroku the entire map was blue. Not even the standard mapbox tiles were loaded.\r\n      // \r\n      // I tried changing the code in the udpateMap to listen to both load and data\r\n      // ('load data' instead of 'data'). The docs said that this would work but it didn't.\r\n      // \r\n      // Putting the explicit \"listen to load event\" back into componentDidMount \r\n      // while leaving the 'data' event listener for the subsequent style updates did \r\n      // the trick. It now works both on Heroku and in my local production environment. \r\n      //\r\n      newMap.on('load', () => {\r\n        if(newMap.getLayer(districtLayerId) === undefined) {\r\n          newMap.addLayer({\r\n            'id': districtLayerId,\r\n            'type': 'fill',\r\n            'source': {\r\n              'type': 'geojson',\r\n              'data': {\r\n                'type': 'Feature',\r\n                'geometry': voter.location.districtBoundaries\r\n              }\r\n            },\r\n            'layout': {},\r\n            'paint': {\r\n              'fill-color': '#D3D3D3',\r\n              'fill-opacity': 0.8\r\n            }\r\n          });\r\n        }\r\n      });\r\n\r\n      this.district = voter.location.district;\r\n\r\n      // Unfortunately the DOM must be rendered before we can create the map \r\n      // (and set the state) because it's a mapbox requirement that the DOM container \r\n      // must exist and be passed in to create the map.\r\n      this.setState({ map: newMap }); // districtUpdated can be safely set to false because by this time the new district has been added as a layer to the map\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n//    this.updateMap();\r\n  }\r\n\r\n  updateMap() {\r\n    // If the voter's new address is in a different voting district, add the new voting district shaded area\r\n    // to the map and centre on it.\r\n    const voter = this.context.user;\r\n    if((this.state.map !== null) && (this.state.map.isSourceLoaded)) {\r\n      const voterLatitude = voter.location.coordinates.latitude;\r\n      const voterLongitude = voter.location.coordinates.longitude;\r\n\r\n      this.state.map.setCenter([voterLongitude, voterLatitude]);\r\n      this.context.log.debug(\"Landing componentDidUpdate map is \", this.state.map);\r\n\r\n      if(this.districtChanged(voter.location.district)) {\r\n        let districtLayerId = voter.location.district.replace(/\\s/g, \"\");\r\n        // When constructing a mapbox map, the first time that you create a style\r\n        // and a layer, you may listen to the 'load' event and add the layer during that\r\n        // event. This ensures that the style has finished loading before you change\r\n        // it by adding a new layer.\r\n        // \r\n        // When adding layers dynamically to a mapbox style, listen to the 'data' event\r\n        // and add the new layers during that event because the load event is only \r\n        // fired once during the map lifespan. \r\n        this.state.map.on('data', () => {\r\n          if(this.state.map.getLayer(districtLayerId) === undefined) {\r\n            this.state.map.addLayer({\r\n              'id': districtLayerId,\r\n              'type': 'fill',\r\n              'source': {\r\n                'type': 'geojson',\r\n                'data': {\r\n                  'type': 'Feature',\r\n                  'geometry': voter.location.districtBoundaries\r\n                }\r\n              },\r\n              'layout': {},\r\n              'paint': {\r\n                'fill-color': '#D3D3D3',\r\n                'fill-opacity': 0.8\r\n              }\r\n            });\r\n          };\r\n\r\n          this.district = voter.location.district;\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  districtChanged(newDistrict) {\r\n    return this.district !== newDistrict;\r\n  }\r\n  \r\n  renderDefault = () => {\r\n    let voter = this.context.user;\r\n    return (\r\n      <div className=\"container-fluid full-screen\">\r\n        <div className=\"row\">\r\n            <div className=\"col-8 col-sm-9 mt-3 ml-3 bg-white text-center pt-2 mapFormWidget\">\r\n                Your district is {voter.location.district}\r\n            </div>\r\n            <div className=\"col-3 col-sm-2 mt-3\">\r\n              <Button variant=\"secondary w-100\" \r\n                      onClick={ () => { this.setState({ activeComponentId: 2 })}} >\r\n                  Edit</Button>\r\n            </div>\r\n        </div>\r\n        <div className=\"row\">\r\n           <div ref={el => this.mapContainer = el} className=\"col mapContainer\" />\r\n        </div>\r\n        <div className=\"row pb-3\">\r\n            <div className=\"col\">\r\n                <Button variant=\"secondary w-100\" \r\n                    onClick={ () => { this.setState({ activeComponentId: 3 })}} >\r\n                    View Candidates</Button>\r\n            </div>\r\n            <div className=\"col\">\r\n                <Button variant=\"secondary w-100\"\r\n                    onClick={ () => { \r\n                      this.setState({ activeComponentId: 4 })}} disabled={voter.hasvoted==='true'}>\r\n                    Vote</Button>\r\n            </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }  \r\n\r\n  // // active component 1\r\n  // renderLoading = () => {\r\n  //   return <LoadingSpinner />;\r\n  // };\r\n\r\n  // active component 2\r\n  renderEditDistrict = () => {\r\n    const voter = this.context.user;\r\n    return <EditDistrict location={voter.location} />;\r\n  };\r\n\r\n  \r\n  // active component 3\r\n  renderViewCandidates = () => {\r\n    return <ViewCandidates log={this.context.log}/>;\r\n  }\r\n\r\n\r\n  // active component 4\r\n  renderVote = () => {\r\n    return <Vote log={this.context.log}/>;\r\n  }\r\n\r\n  renderActiveComponent = () => {\r\n    switch(this.state.activeComponentId) {\r\n      case(4): {\r\n        return this.renderVote();\r\n      }\r\n\r\n      case(3): {\r\n          return this.renderViewCandidates();\r\n      }\r\n\r\n      case(2): {\r\n        return this.renderEditDistrict();\r\n      }\r\n\r\n      // case(1): {\r\n      //     return this.renderLoading();\r\n      // }\r\n\r\n      case(0):\r\n      default: {\r\n          return this.renderDefault();\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return this.renderActiveComponent();\r\n  }\r\n};\r\nLanding.contextType = UserContext;\r\n\r\nexport default Landing;\r\n","const ottawaCentreDistrictBoundaries = {\"coordinates\": [[[[-75.68056163858387, 45.41809970468586], [-75.680693602916, 45.4178273887163], [-75.67983772802621, 45.41810513388881], [-75.67832542905708, 45.41859591071425], [-75.67820741820123, 45.4185575997968], [-75.67820590071669, 45.41855698167804], [-75.6777744525163, 45.41841300506143], [-75.67571159085885, 45.41772408731242], [-75.67561533063973, 45.4176825117427], [-75.67530048649036, 45.41754649429248], [-75.67490168216852, 45.41733280261834], [-75.67452801346491, 45.417074011238284], [-75.67410158652862, 45.41668950363099], [-75.67389439240924, 45.41645658770249], [-75.67376729104046, 45.416520406087685], [-75.67290200428859, 45.416840494253606], [-75.67255790177802, 45.4169236084173], [-75.67235711149883, 45.41697352703586], [-75.6721501003633, 45.41702499957016], [-75.6717292978364, 45.41710849319457], [-75.67024958727869, 45.41735120310859], [-75.66906521941391, 45.417313364325786], [-75.66906048723449, 45.41731320310462], [-75.66802421404483, 45.41722019855758], [-75.66766876389246, 45.41717166843625], [-75.66701289255589, 45.41708210322617], [-75.66642368713076, 45.416977497057786], [-75.66540020624109, 45.41689350288725], [-75.66462079998401, 45.41690699549131], [-75.66391841101506, 45.41695610989122], [-75.66375231623223, 45.41696609500968], [-75.66351027906663, 45.41698867992564], [-75.66350984671821, 45.416969555379175], [-75.66350511489246, 45.41685868034679], [-75.66348945314755, 45.416492849912764], [-75.66348958371728, 45.41613062258714], [-75.66393028880027, 45.41537628452913], [-75.66404633590531, 45.41518226313705], [-75.66405167513557, 45.41518138491036], [-75.66602268639718, 45.41485569374478], [-75.66858339448011, 45.414464038323864], [-75.66877531526032, 45.414433484327176], [-75.66896001266352, 45.41440197191144], [-75.66941215760897, 45.414177352896736], [-75.66997294768989, 45.41382869164967], [-75.670541712643, 45.41347510798916], [-75.67056619000212, 45.41345882424018], [-75.67123269393382, 45.41301480227684], [-75.67152187016526, 45.412822145673466], [-75.67229841346631, 45.411941650763296], [-75.67233575594393, 45.411899289742195], [-75.67235771447166, 45.411868810393685], [-75.67261637657309, 45.411509417914395], [-75.67285197413796, 45.41118208129055], [-75.67330385038666, 45.410584191777204], [-75.67333942374417, 45.41053716427611], [-75.67312555009161, 45.4096833109072], [-75.67207495636828, 45.40823655132155], [-75.6719987555249, 45.40813160073744], [-75.67195186814187, 45.408067024788274], [-75.67195076464935, 45.40806548837297], [-75.67035731672708, 45.406477303037626], [-75.67024937719279, 45.40636972275235], [-75.67017821924962, 45.406294862193455], [-75.66979720547576, 45.4058939595345], [-75.66926288226688, 45.40532216749838], [-75.66921410605985, 45.40526995664127], [-75.66898282787102, 45.40502243506867], [-75.66896765227477, 45.40376684545015], [-75.66898926636804, 45.40360142985689], [-75.66913471424974, 45.40248778509125], [-75.66918147531088, 45.40212990207943], [-75.66919651442697, 45.40201473641553], [-75.66940162673434, 45.40176473389153], [-75.67054848428269, 45.40036662269981], [-75.67109763118295, 45.39969713635722], [-75.6711530694528, 45.39963039629682], [-75.67145400318033, 45.399269005835585], [-75.67191960224595, 45.39870991891148], [-75.67282344719571, 45.397180320247124], [-75.67333552229324, 45.39631367120464], [-75.67379649905159, 45.395533446428054], [-75.67382955007534, 45.39546979645792], [-75.67446799008863, 45.39423898641746], [-75.67474097063503, 45.393712660307855], [-75.67504625425248, 45.39335508567698], [-75.67514594010696, 45.393238260209095], [-75.67517180531216, 45.3931939577378], [-75.67541777983467, 45.392919858730444], [-75.67610224980143, 45.39202893706577], [-75.67688733935101, 45.391004886857175], [-75.67715243054657, 45.39065914675868], [-75.67772744356151, 45.38914244119086], [-75.67773254961776, 45.38913987224128], [-75.67904659977339, 45.38847684396777], [-75.67931851361003, 45.388221026640714], [-75.67951392598418, 45.38803718753546], [-75.67982177089317, 45.38778889790405], [-75.67985600295698, 45.38776323608755], [-75.67997457061018, 45.38775758361699], [-75.68062486596503, 45.387781516086], [-75.68069748983821, 45.38778418149818], [-75.68079451949764, 45.387801076181844], [-75.6809207488858, 45.387823034752934], [-75.68132493401878, 45.38789334701277], [-75.68147240957896, 45.38791898941814], [-75.68164290413407, 45.38794864108234], [-75.6818600276857, 45.38798641959375], [-75.68226868081311, 45.388118043965974], [-75.68301829646751, 45.388206272152814], [-75.68334233880074, 45.388244415711846], [-75.68423885962714, 45.387988302805006], [-75.68459209634351, 45.387887387621305], [-75.68513079162199, 45.387494035311775], [-75.68522593671224, 45.38723621102957], [-75.68522572076537, 45.38722955415869], [-75.68520942279538, 45.38680308870346], [-75.68510730387628, 45.386269015495316], [-75.68500908436592, 45.3857836259302], [-75.68507744756661, 45.38549487248816], [-75.6851062671015, 45.38537322294244], [-75.68519232147044, 45.385009770107665], [-75.68525670989686, 45.384737918065476], [-75.68568378278118, 45.38451387564944], [-75.68731434877192, 45.383658432106], [-75.68758206175367, 45.383517992084776], [-75.68865347397268, 45.38320838053278], [-75.68880751616791, 45.3831638663564], [-75.68895831320859, 45.38312030055801], [-75.68920229760901, 45.383049788736926], [-75.6915595000205, 45.382771325345416], [-75.69212596688675, 45.38270440343513], [-75.69332507798372, 45.38235356307185], [-75.6937517815105, 45.38222873455469], [-75.69485435804503, 45.38190609862305], [-75.69490161341577, 45.38189741295299], [-75.69496036118124, 45.38188664732923], [-75.69507289680662, 45.381865986140134], [-75.69514193812509, 45.38185619013501], [-75.69517090024915, 45.38184799882151], [-75.69546734992517, 45.38176417111304], [-75.69565177222175, 45.38171733902294], [-75.69590374569046, 45.381653375771016], [-75.69607984712569, 45.38156207532036], [-75.69612679354675, 45.3815377189661], [-75.69638626140305, 45.38137985042005], [-75.69656151870441, 45.38133481707425], [-75.69660853877996, 45.381322739984306], [-75.69689467317438, 45.381243113776726], [-75.69707283550818, 45.38114983578899], [-75.69717842546001, 45.38109455531084], [-75.69745165567063, 45.38088051748292], [-75.69758903901082, 45.380782282797725], [-75.69769667965238, 45.38070533049136], [-75.69782973565978, 45.3806081602024], [-75.69840879927787, 45.38018532097756], [-75.69869983156012, 45.37997943244612], [-75.6988636558024, 45.379825363722276], [-75.69896533310784, 45.379729744452916], [-75.69935278625061, 45.37937522979694], [-75.69939777287728, 45.37933252077395], [-75.69953422170373, 45.37920307105788], [-75.69976020073948, 45.37898527151093], [-75.6997706133201, 45.378968400307215], [-75.69999292691391, 45.37875560491018], [-75.70016172552828, 45.378424426142665], [-75.70022195427822, 45.37800754461422], [-75.70022448479239, 45.37796645151234], [-75.70023570323723, 45.377782796257605], [-75.70024985553277, 45.377551819304415], [-75.70024487311814, 45.377513692086346], [-75.70026443733974, 45.37737142164744], [-75.70007834647818, 45.37669209123543], [-75.69992545809248, 45.37620517625289], [-75.6998476771221, 45.3759574466388], [-75.69984239182665, 45.375940578271624], [-75.69994917316647, 45.37566447747742], [-75.69999073711854, 45.3756086944874], [-75.7000747519981, 45.375529955173036], [-75.70015267805614, 45.37535830659246], [-75.70013665798909, 45.3750042274509], [-75.70010655651622, 45.37441000434128], [-75.70008912918817, 45.3741378649753], [-75.70009911555087, 45.37394980307756], [-75.70006672628686, 45.373787718523616], [-75.69996067517833, 45.37325671397844], [-75.6997726797485, 45.37272707668473], [-75.6996901606014, 45.37250390163506], [-75.69964476289798, 45.37238104330379], [-75.69945339429917, 45.37221189423111], [-75.69940212531388, 45.37216657339411], [-75.69935573032885, 45.372125544786215], [-75.69891490481265, 45.37181973193471], [-75.69833032624547, 45.37161513426434], [-75.69803596392404, 45.371576238870375], [-75.6979067434875, 45.37156674875302], [-75.69776983089935, 45.37155668661582], [-75.6976939604536, 45.37155113454509], [-75.6974494495479, 45.37152134053924], [-75.69732527253754, 45.37150320151573], [-75.69719169560094, 45.37147523366635], [-75.69704739980823, 45.37144504094288], [-75.69683959524714, 45.37135734570142], [-75.69662726755581, 45.37111847288127], [-75.69659102911915, 45.370988005518285], [-75.6965792753103, 45.370942492574066], [-75.69653924163667, 45.37078729635439], [-75.69653428447053, 45.37076813428235], [-75.696465389308, 45.36970501476502], [-75.69638160563761, 45.368412070058405], [-75.69637716669601, 45.36840720345296], [-75.6963716292885, 45.36840108962894], [-75.6952963745073, 45.367214366886515], [-75.69412732492798, 45.36592406506972], [-75.69056712738757, 45.36199404877699], [-75.68963440538664, 45.36096432399035], [-75.68967064836374, 45.36090195183935], [-75.68976348695095, 45.36074223312266], [-75.69007972967458, 45.36019807502691], [-75.69072747348662, 45.35908350579688], [-75.69136594988474, 45.35850517460787], [-75.69227067303139, 45.35768564351728], [-75.69241418904953, 45.357522033592225], [-75.69853012270819, 45.35691862841324], [-75.69854256615275, 45.35691656679344], [-75.69883735384158, 45.35674488734363], [-75.70009988455826, 45.356038971554725], [-75.70282816842021, 45.35451337089902], [-75.70255137837341, 45.35409758217087], [-75.70351991001357, 45.3542534018673], [-75.70392448623602, 45.35431849295678], [-75.70398252830798, 45.35403577818867], [-75.704009413432, 45.35390469877331], [-75.7040096724069, 45.35390218356452], [-75.7040207134993, 45.35379649644871], [-75.7040993837157, 45.35295919568718], [-75.70411097939983, 45.35285300916543], [-75.70410239865416, 45.35268319415773], [-75.70450268029848, 45.3527306058676], [-75.70481208244514, 45.35279910758626], [-75.70512018840142, 45.3528958993993], [-75.70562059112842, 45.353138693692706], [-75.70594370484415, 45.35336149654962], [-75.70604749972323, 45.353459706513306], [-75.70645251240155, 45.35401479481806], [-75.70662031028867, 45.3541212966533], [-75.70716848992524, 45.355079008668376], [-75.70762571708804, 45.355949097865505], [-75.70776220279846, 45.35620882515423], [-75.70779020753369, 45.35626209253092], [-75.70894929952296, 45.35825890490584], [-75.71008309811135, 45.36025538678417], [-75.71038149302422, 45.360824411626155], [-75.71102969341194, 45.36194469784665], [-75.71126449020295, 45.36232970314584], [-75.71139663583456, 45.362546529983916], [-75.71145398820244, 45.36264059957719], [-75.71149383221932, 45.36271119913577], [-75.71165369566341, 45.36299439252797], [-75.71212680219624, 45.363833004542094], [-75.71242600604852, 45.364347988619656], [-75.713161486009, 45.36562190734611], [-75.71353459854076, 45.3663353939791], [-75.71394678997227, 45.366986104430715], [-75.71459488752417, 45.36812438820365], [-75.71535540164807, 45.36944350487909], [-75.71572931821007, 45.37010299917666], [-75.71601049149561, 45.37057518600519], [-75.71613180506195, 45.37068008929942], [-75.71639289782034, 45.37113740937728], [-75.71654969024105, 45.37141550800798], [-75.71661488942031, 45.3715230906311], [-75.71700868844594, 45.37135859373168], [-75.72003138589426, 45.37004339012551], [-75.723482390997, 45.368546805293235], [-75.72697821186101, 45.36702889015796], [-75.72921298800341, 45.36604248813249], [-75.73043191657226, 45.36550369254877], [-75.73072409529803, 45.365384805133715], [-75.73082948663853, 45.365636102677406], [-75.73123399670608, 45.366262796401564], [-75.73137819160881, 45.366550104517195], [-75.73145868970545, 45.366855789523676], [-75.73159739968642, 45.367755500081174], [-75.73188911066329, 45.3696313039894], [-75.73198689474596, 45.37022840801168], [-75.73215059783374, 45.371244008104846], [-75.73223781854142, 45.3713253951426], [-75.73228835726815, 45.371627753156865], [-75.73237301031588, 45.37213410539822], [-75.73232308488839, 45.372242206251286], [-75.73247596998051, 45.373208794322856], [-75.73251371676996, 45.3734474983223], [-75.73259621490938, 45.37384000086689], [-75.7326993877611, 45.374292396324606], [-75.73270394511152, 45.37431773027223], [-75.73275979157307, 45.37463029116809], [-75.7327858899156, 45.37474200776594], [-75.73285379439734, 45.37505658902984], [-75.7329224893109, 45.37537779985548], [-75.73300351591905, 45.37582960226894], [-75.73307360598788, 45.376388107798704], [-75.7330832054898, 45.37646953723088], [-75.73309223061543, 45.37654597191343], [-75.73316159525662, 45.377133894563315], [-75.73316280520353, 45.37722391109291], [-75.73321820323687, 45.37758340846418], [-75.73330909735246, 45.377717894048885], [-75.73333171199202, 45.377862393447245], [-75.73332799858255, 45.37814101268098], [-75.73333915077276, 45.37825776595066], [-75.7333392126313, 45.3782584048616], [-75.7333376881504, 45.37829099567404], [-75.73333646856445, 45.37831791558956], [-75.73333221160436, 45.37841119606945], [-75.73332100879661, 45.37865419244966], [-75.73332529004622, 45.379075400149965], [-75.73332648223573, 45.37919240006952], [-75.73332649007443, 45.379196010124915], [-75.73332140366666, 45.37928589692438], [-75.73327879354316, 45.38003128845039], [-75.73327629590916, 45.3800757043313], [-75.73324741621764, 45.38023299842765], [-75.73323089448145, 45.38032260092548], [-75.73317119035711, 45.38088729305263], [-75.73316200313747, 45.38097481022329], [-75.73314930774833, 45.38112159478338], [-75.7330862889266, 45.38184720910692], [-75.73288128651492, 45.382844601549515], [-75.7326116906702, 45.38389570470414], [-75.73235289796611, 45.38509080833252], [-75.73233921329162, 45.385162705019624], [-75.73228549365052, 45.38535129133657], [-75.7321495817578, 45.38596230086579], [-75.73213498047846, 45.38609720912518], [-75.73222171046453, 45.38629571153879], [-75.73257419248992, 45.38666699970318], [-75.73267480698708, 45.38678469750206], [-75.7330923896166, 45.38660379148187], [-75.73380509196163, 45.386294604808775], [-75.73516140338558, 45.38570659177657], [-75.73592469349514, 45.385375699549606], [-75.73616811103673, 45.38531430320882], [-75.73619379917736, 45.385305501619506], [-75.736232215337, 45.38529680192268], [-75.73664161586193, 45.385245505163255], [-75.7368331048888, 45.38524679621236], [-75.73810901094946, 45.385347304281964], [-75.73837564750339, 45.38536503441822], [-75.73837728675835, 45.38536350330835], [-75.73842773580922, 45.385318246708174], [-75.7397659239851, 45.38410347976837], [-75.73976604760752, 45.38410334542761], [-75.73985367714577, 45.384022359533404], [-75.73985429392515, 45.384021792287136], [-75.73989220725508, 45.38398549081575], [-75.73991613055829, 45.383968364645035], [-75.73991748391624, 45.38396740889537], [-75.73996793113916, 45.38392204734698], [-75.7415973930183, 45.38251631162689], [-75.74196174201916, 45.38218393697195], [-75.74258148999745, 45.381618585682354], [-75.74270836120157, 45.38150985603412], [-75.74283461372582, 45.38140109189856], [-75.74283550337091, 45.38140028682373], [-75.74288510785588, 45.38135568661673], [-75.74409579696889, 45.38017770508396], [-75.74453163742929, 45.379785481126575], [-75.7452444904859, 45.379143987788915], [-75.74605160240533, 45.37835559754399], [-75.74828510107668, 45.37629768177093], [-75.74839589005695, 45.37620052833971], [-75.74839878622755, 45.37619799773676], [-75.74847445441596, 45.376125444576694], [-75.75112429156268, 45.37369569763055], [-75.75292722910245, 45.372111083462116], [-75.75430172389385, 45.370902942299615], [-75.75457069263028, 45.37066650692097], [-75.75465851201935, 45.37053990519417], [-75.75473219446575, 45.37065288702648], [-75.75478108565463, 45.37072782624557], [-75.75481388514532, 45.370778102073], [-75.75484889834767, 45.37086881114955], [-75.75511050575226, 45.37136539080955], [-75.7551986971935, 45.371520787409324], [-75.75525278554, 45.3716160225857], [-75.75537619395791, 45.371833300090415], [-75.75594661022826, 45.372837708062924], [-75.75689411106521, 45.37458060948832], [-75.75758018746002, 45.37580889559042], [-75.7576425010006, 45.37592631132862], [-75.75781689543675, 45.37626039905825], [-75.75786919565752, 45.3767519971491], [-75.75789852005207, 45.37685479329049], [-75.75806129457098, 45.37709880528281], [-75.75831390617363, 45.377307407516696], [-75.7586307188285, 45.377489492996844], [-75.75877048991848, 45.37754440112822], [-75.75922810726509, 45.37770029170609], [-75.75961029302896, 45.37776578755062], [-75.76003110523585, 45.377804493137944], [-75.76040170648005, 45.37777989084736], [-75.7613879974191, 45.377543305432376], [-75.76275910935959, 45.37716520720837], [-75.76306537382159, 45.37710977715529], [-75.76314310077927, 45.37709571283786], [-75.76374371008991, 45.37705460295481], [-75.76420280072516, 45.37709360196807], [-75.7646359896144, 45.377168296942926], [-75.76542560405439, 45.377326405282766], [-75.76593491846236, 45.37743769262392], [-75.76627850783825, 45.37752090819793], [-75.7666978078943, 45.37768551027769], [-75.76684979522776, 45.37777648937448], [-75.76703919156189, 45.37793970347262], [-75.76724068367156, 45.378156994567405], [-75.76761829138977, 45.378582295268714], [-75.76769339605067, 45.37869980933557], [-75.76783149555996, 45.37888060038445], [-75.76793131067171, 45.37906128887219], [-75.76824785546007, 45.3794268772671], [-75.76834649944912, 45.37954081153833], [-75.76872559661545, 45.379849193675646], [-75.76911801231661, 45.380112704056614], [-75.76945960985269, 45.380357903843546], [-75.76991588816834, 45.380621702075466], [-75.77038560382813, 45.38083170745436], [-75.77082999096957, 45.381032492338726], [-75.7711795984052, 45.38124761203833], [-75.77261368845623, 45.38306056321592], [-75.77286548028822, 45.383378825622295], [-75.77329600405496, 45.3838633082528], [-75.77875423737555, 45.39046773226861], [-75.77872899087942, 45.39048962001177], [-75.77251089306338, 45.395880112998626], [-75.77248040309081, 45.3959065624105], [-75.76908615395199, 45.39928246700672], [-75.76630140992192, 45.402051762259006], [-75.76238777519838, 45.406640836251775], [-75.75967296389751, 45.409823592147404], [-75.75965848589834, 45.40984056556478], [-75.75965404875714, 45.409845771278405], [-75.75963781182233, 45.409864803726855], [-75.75961754659679, 45.40987944095184], [-75.75900375880323, 45.410323194168924], [-75.75822336209029, 45.41088740936934], [-75.75807852959083, 45.41100441541096], [-75.75640630823901, 45.412355333999116], [-75.75639480453596, 45.41236461230688], [-75.75636634857786, 45.41238758869688], [-75.75635894605746, 45.412393587494655], [-75.75634948858537, 45.41239568126886], [-75.75354175661498, 45.41298083865474], [-75.75309838496534, 45.41304601991074], [-75.75112392992135, 45.413336238372594], [-75.74741340254566, 45.413407720399476], [-75.7444580756481, 45.4137928163322], [-75.74438740801506, 45.413802021768646], [-75.74437679868426, 45.413803407469025], [-75.74436318548345, 45.413805186576205], [-75.74193290996381, 45.41412179219803], [-75.73908269367983, 45.414997182960924], [-75.73906937411836, 45.41500129025231], [-75.7390392351095, 45.41501053988435], [-75.73900252391644, 45.41502180680282], [-75.73898257651044, 45.415026064438166], [-75.73891774320558, 45.41503988777406], [-75.7330058800054, 45.41630050331322], [-75.73264187144916, 45.416396170525], [-75.73259499562154, 45.416408508832625], [-75.73256515068282, 45.4164163458672], [-75.73255462806644, 45.41641910613653], [-75.73254497140756, 45.41642163227074], [-75.73125512551158, 45.41676064428522], [-75.7311173259899, 45.41678452148503], [-75.72962004299717, 45.41697940004575], [-75.72874739471644, 45.416913593514586], [-75.72872265423233, 45.41691190000064], [-75.72862659311224, 45.41690531569744], [-75.72275620822448, 45.41650251639768], [-75.72248075573061, 45.41654629720865], [-75.72219013874606, 45.41664788116543], [-75.72209870429597, 45.41667985006845], [-75.72179622792069, 45.41678559589596], [-75.72146739826866, 45.41719405511075], [-75.72140114595003, 45.417388731110876], [-75.72130851194012, 45.417660870774164], [-75.72138760402504, 45.41916087593921], [-75.7224823744135, 45.419750751492174], [-75.72236163339478, 45.42023178764596], [-75.72197325799748, 45.42069416716255], [-75.71836176658564, 45.42130735359396], [-75.71540827633139, 45.421958467203005], [-75.71371956537881, 45.422254602089296], [-75.71363730326547, 45.42227090131943], [-75.71348579548115, 45.42230093528624], [-75.71114317444025, 45.422765222991174], [-75.70830850051611, 45.423326934239206], [-75.70687392422147, 45.423856503600454], [-75.70468636043671, 45.42466394459754], [-75.70441191068487, 45.425238370656025], [-75.70374455634087, 45.426635200380794], [-75.70377726187844, 45.429754307191835], [-75.70341820428146, 45.429621757157946], [-75.70339480897236, 45.429607329191484], [-75.70240780756208, 45.428998504085044], [-75.69949151689944, 45.427199533732974], [-75.69903578449227, 45.42691837967721], [-75.69902805459188, 45.42691395736339], [-75.6990255960144, 45.42691256590734], [-75.69881267471457, 45.42679069151353], [-75.6986581099717, 45.42671313234217], [-75.69812843287859, 45.42644685266041], [-75.69788282591193, 45.426323364031084], [-75.69661568907135, 45.42560505365081], [-75.6965930827413, 45.425592625088534], [-75.69518950278696, 45.42483062014462], [-75.69509895146449, 45.42478145629635], [-75.69509480400977, 45.42477920631894], [-75.69501672277826, 45.42474265694461], [-75.6949948282816, 45.424732529269775], [-75.69488945614096, 45.424683765897534], [-75.69477579774086, 45.4246311840342], [-75.69469391349634, 45.42458480903285], [-75.69456944862773, 45.42452446820114], [-75.69418409395205, 45.424380990735806], [-75.69303798115511, 45.4240004211286], [-75.69147830748592, 45.423451116103074], [-75.6914141462182, 45.423428594510206], [-75.69137432330561, 45.423414608587755], [-75.6912541511093, 45.42337244351185], [-75.69052654347374, 45.42311714671369], [-75.69013912515678, 45.42298122285543], [-75.68991450742975, 45.42288247638211], [-75.68934037517525, 45.422630072065736], [-75.68920822714333, 45.42257336421097], [-75.68830230964667, 45.42218461151225], [-75.68710834010645, 45.4216721891165], [-75.68695862315914, 45.4216079440768], [-75.68619402528469, 45.42129790819424], [-75.68516505235958, 45.42088067175634], [-75.685018811314, 45.42081316157103], [-75.68496353034638, 45.42078763039704], [-75.68416481536276, 45.42041895469867], [-75.68396379984267, 45.420326160274], [-75.68326564210628, 45.420003880969716], [-75.68312050908891, 45.41994324047547], [-75.6821395046396, 45.419533438764915], [-75.68213593227325, 45.419531947324316], [-75.68196775544742, 45.419461694928025], [-75.6815367447037, 45.41929859246907], [-75.68098857082246, 45.41909116247767], [-75.68091121888348, 45.41903830338527], [-75.68079344948137, 45.41895789771406], [-75.68067870107053, 45.41870840125909], [-75.6806090193171, 45.41834604222683], [-75.68056163858387, 45.41809970468586]]]], \"type\": \"MultiPolygon\"};\r\n\r\nexport default ottawaCentreDistrictBoundaries;","import React, { Component } from \"react\";\r\nimport UserContext from '../utils/UserContext';\r\nimport 'mapbox-gl/dist/mapbox-gl.css';\r\nimport \"./assets/css/style.css\";\r\nimport mapboxgl from 'mapbox-gl';\r\nimport Button from 'react-bootstrap/Button';\r\nimport ottawaCentreDistrictBoundaries from './assets/geoJSON/ottawaCentreDistrictBoundaries';\r\n\r\nmapboxgl.accessToken = process.env.REACT_APP_MAPBOX_API_TOKEN;\r\n\r\nconst ottawaLat = 45.416667;\r\nconst ottawaLong = -75.7;\r\nconst ottawaLayerId = \"OttawaCentre\"\r\nconst grey = '#D3D3D3';\r\n\r\nconst pcParty = '#244982';\r\nconst greenParty = '#4e9a2f';\r\nconst blocQuebecois = '#143d73';\r\nconst liberal = '#cd2003';\r\nconst ndp = '#ec8200';\r\nconst neonPink = \"#FF6EC7\"; // independent or not one of the major parties\r\nconst partyColours = [\r\n  pcParty,\r\n  greenParty,\r\n  blocQuebecois,\r\n  liberal,\r\n  ndp,\r\n  neonPink\r\n];\r\n\r\nclass Simulation extends Component {\r\n  state = {\r\n    map: null\r\n  };\r\n\r\n  componentDidMount() {\r\n      const newMap = new mapboxgl.Map({\r\n        container: this.mapContainer,\r\n        style: 'mapbox://styles/mapbox/dark-v10',\r\n        center: [ottawaLong, ottawaLat],\r\n        zoom: 12\r\n      });\r\n\r\n      newMap.on('load', () => {\r\n        newMap.addLayer({\r\n          'id': ottawaLayerId,\r\n          'type': 'fill',\r\n          'source': {\r\n            'type': 'geojson',\r\n            'data': {\r\n              'type': 'Feature',\r\n              'geometry': ottawaCentreDistrictBoundaries\r\n            }\r\n          },\r\n          'layout': {},\r\n          'paint': {\r\n            'fill-color': grey,\r\n            'fill-opacity': 0.8\r\n          }\r\n        });\r\n      });\r\n\r\n      this.setState({ map: newMap });\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    //   let voter = this.context.user;\r\n    //   const voterLatitude = voter.location.coordinates.latitude;\r\n    //   const voterLongitude = voter.location.coordinates.longitude;\r\n\r\n    this.state.map.setCenter([ottawaLong, ottawaLat]);\r\n  }\r\n  \r\n  renderMap = () => {\r\n    return (\r\n      <div className=\"container-fluid full-screen\">\r\n        <div className=\"row\">\r\n           <div ref={el => this.mapContainer = el} className=\"col mapContainer\" />\r\n        </div>\r\n        <div className=\"row pb-3\">\r\n            <div className=\"col\">\r\n                <Button variant=\"secondary w-100\" \r\n                    onClick={ () => { this.renderResetSimulation(); }} >\r\n                    Reset</Button>\r\n            </div>\r\n            <div className=\"col\">\r\n                <Button variant=\"secondary w-100\"\r\n                    onClick={ () => { this.renderSimulation()}} >\r\n                    Simulate</Button>\r\n            </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }  \r\n\r\n  randomColour = () => {\r\n    const log = this.context.log;\r\n    log.warn(\"generate a random party colour as the winner\");\r\n    // Generate a random number between 0 and partyColours.length-1\r\n    // Math.floor will round down, meaning we would get a number between 0 and the length\r\n    // Math.ceil would round up, meaning a number between 1 and partyColours.length\r\n    var partyColoursIndex = Math.floor(Math.random() * (partyColours.length));\r\n    return partyColours[partyColoursIndex];\r\n  }\r\n\r\n  // Run the simulation\r\n  renderSimulation = () => {\r\n    // Pretend that a simulation has been run. For now just change the fill colour of the one district.\r\n    this.state.map.setPaintProperty(ottawaLayerId, 'fill-color', this.randomColour());\r\n  };\r\n  \r\n  // \"Undo\" the simulation. Reset all votes to null and regenerate the map.\r\n  renderResetSimulation = () => {\r\n    this.state.map.setPaintProperty(ottawaLayerId, 'fill-color', grey);    \r\n  }\r\n\r\n  render() {\r\n    return this.renderMap();\r\n  }\r\n};\r\nSimulation.contextType = UserContext;\r\n\r\nexport default Simulation;\r\n","import React, { useState } from 'react';\r\nimport Login from \"./components/Login\";\r\nimport Landing from \"./components/Landing\";\r\nimport UserContext from './utils/UserContext';\r\nimport log from 'loglevel';\r\nimport remote from 'loglevel-plugin-remote';\r\nimport Simulation from './components/Simulation';\r\n\r\n// When debugging the React code, set the user data as though they logged in via Login.\r\n// When not debugging, comment out the below import.\r\n//import hannahWhite from './debugReact'; \r\n\r\nconst level = (process.env.REACT_APP_LOGGING_LEVEL) ? process.env.REACT_APP_LOGGING_LEVEL : 'info';\r\nlog.setLevel(level);\r\nlog.info(\"App mapbox access token is \", process.env.REACT_APP_MAPBOX_API_TOKEN);\r\nconst customJSON = log => ({\r\n  msg: log.message,\r\n  level: level,\r\n  stacktrace: log.stacktrace\r\n});\r\n\r\nremote.apply(log, { format: customJSON, url: '/internal/v1/logger' });\r\n\r\nfunction App() {\r\n  const [user, setUser] = useState( null );\r\n  // FOR DEBUGGING REACT. Comment out and replace with the line above when in production.\r\n  //const [user, setUser] = useState(hannahWhite); \r\n  // END DEBUGGING REACT\r\n\r\n  // This React application was designed to have only three roots:\r\n  //   1. Login \r\n  //   2. Landing (after user has logged in)\r\n  //   3. Simulation (after admin has logged in)\r\n  //\r\n  // You cannot reach any of the components via a Router. This was done\r\n  // so that we do not need to check, in every component, if the user has logged\r\n  // in or not. The URL cannot reach any components except Login, Landing, or Simulation. \r\n  let component = null;\r\n  if(user === null) {\r\n    component = <Login log={log}/>\r\n  } else if(user.isAdmin === true) {\r\n    component = <Simulation />\r\n  } else {\r\n    component = <Landing />\r\n  }\r\n\r\n  return (\r\n    <UserContext.Provider value={ {\r\n      user: user,\r\n      handleLogin: (newUser) => {\r\n        if((newUser === null)) {\r\n          // If null, either the username or the password didn't match. No one is logged in yet.\r\n          return;\r\n        }\r\n\r\n        if(!newUser.isAdmin) {\r\n          // If the user is an administrator, they don't have an address etc. They just need to run the simulation.\r\n          const userSubset = {\r\n            name: newUser.name,\r\n            district: newUser.location.district,\r\n            street: newUser.location.street,\r\n            city: newUser.location.city,\r\n            postcode: newUser.location.postcode,\r\n            username: newUser.login.username\r\n          }\r\n          log.info(\"App Context \", JSON.stringify(userSubset)); \r\n        }\r\n        setUser(newUser)\r\n      },\r\n      log: log\r\n    } }>\r\n      { component }\r\n    </UserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\nimport \"font-awesome/css/font-awesome.min.css\";\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}